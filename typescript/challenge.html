<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Type-Challenges | 汪图南</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/icon.png">
    <script>var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?1876f64fd31c9aba1a7a5e157813a075";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();</script>
    <meta name="description" content="汪图南的个人博客">
    
    <link rel="preload" href="/blog/assets/css/0.styles.45a06a3c.css" as="style"><link rel="preload" href="/blog/assets/js/app.0b7fabf2.js" as="script"><link rel="preload" href="/blog/assets/js/7.43c511ce.js" as="script"><link rel="preload" href="/blog/assets/js/57.68af370b.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.9e27f4a0.js"><link rel="prefetch" href="/blog/assets/js/10.40322b21.js"><link rel="prefetch" href="/blog/assets/js/100.ce26d877.js"><link rel="prefetch" href="/blog/assets/js/101.c4fb4be1.js"><link rel="prefetch" href="/blog/assets/js/102.d79c6451.js"><link rel="prefetch" href="/blog/assets/js/103.37951529.js"><link rel="prefetch" href="/blog/assets/js/104.a65c505d.js"><link rel="prefetch" href="/blog/assets/js/105.18202c4d.js"><link rel="prefetch" href="/blog/assets/js/106.07c83549.js"><link rel="prefetch" href="/blog/assets/js/107.6ae74b6d.js"><link rel="prefetch" href="/blog/assets/js/108.278fe5a7.js"><link rel="prefetch" href="/blog/assets/js/109.12400794.js"><link rel="prefetch" href="/blog/assets/js/11.6c72902c.js"><link rel="prefetch" href="/blog/assets/js/110.49050b27.js"><link rel="prefetch" href="/blog/assets/js/111.87ece0c9.js"><link rel="prefetch" href="/blog/assets/js/112.40084576.js"><link rel="prefetch" href="/blog/assets/js/113.d7b54462.js"><link rel="prefetch" href="/blog/assets/js/114.89ebdbac.js"><link rel="prefetch" href="/blog/assets/js/115.cdaa9063.js"><link rel="prefetch" href="/blog/assets/js/116.6172650f.js"><link rel="prefetch" href="/blog/assets/js/117.89528a81.js"><link rel="prefetch" href="/blog/assets/js/118.0a373abb.js"><link rel="prefetch" href="/blog/assets/js/119.96534a92.js"><link rel="prefetch" href="/blog/assets/js/12.d17cb71d.js"><link rel="prefetch" href="/blog/assets/js/120.ff0706d2.js"><link rel="prefetch" href="/blog/assets/js/121.395e14e9.js"><link rel="prefetch" href="/blog/assets/js/122.1650a222.js"><link rel="prefetch" href="/blog/assets/js/123.87113deb.js"><link rel="prefetch" href="/blog/assets/js/124.827c3905.js"><link rel="prefetch" href="/blog/assets/js/125.e46203f3.js"><link rel="prefetch" href="/blog/assets/js/126.b8a0a0c7.js"><link rel="prefetch" href="/blog/assets/js/127.6280496d.js"><link rel="prefetch" href="/blog/assets/js/128.00511a16.js"><link rel="prefetch" href="/blog/assets/js/129.e507201a.js"><link rel="prefetch" href="/blog/assets/js/13.b8cb7abf.js"><link rel="prefetch" href="/blog/assets/js/130.78a4633f.js"><link rel="prefetch" href="/blog/assets/js/14.eef5cfb9.js"><link rel="prefetch" href="/blog/assets/js/15.4cfe69cb.js"><link rel="prefetch" href="/blog/assets/js/16.2b6ec72d.js"><link rel="prefetch" href="/blog/assets/js/17.f28d98b8.js"><link rel="prefetch" href="/blog/assets/js/18.13ee2622.js"><link rel="prefetch" href="/blog/assets/js/19.5076e6d8.js"><link rel="prefetch" href="/blog/assets/js/2.f1b7bd12.js"><link rel="prefetch" href="/blog/assets/js/20.1b5adb20.js"><link rel="prefetch" href="/blog/assets/js/21.889c257c.js"><link rel="prefetch" href="/blog/assets/js/22.d99d235f.js"><link rel="prefetch" href="/blog/assets/js/23.c9c14684.js"><link rel="prefetch" href="/blog/assets/js/24.550b903f.js"><link rel="prefetch" href="/blog/assets/js/25.af703038.js"><link rel="prefetch" href="/blog/assets/js/26.48a96fb0.js"><link rel="prefetch" href="/blog/assets/js/27.1ce814e4.js"><link rel="prefetch" href="/blog/assets/js/28.b2fe5796.js"><link rel="prefetch" href="/blog/assets/js/29.28ffe875.js"><link rel="prefetch" href="/blog/assets/js/3.ea67a12f.js"><link rel="prefetch" href="/blog/assets/js/30.25732a74.js"><link rel="prefetch" href="/blog/assets/js/31.3fa7383d.js"><link rel="prefetch" href="/blog/assets/js/32.cf9aa75f.js"><link rel="prefetch" href="/blog/assets/js/33.6e23fa14.js"><link rel="prefetch" href="/blog/assets/js/34.637db699.js"><link rel="prefetch" href="/blog/assets/js/35.0543ea14.js"><link rel="prefetch" href="/blog/assets/js/36.ea9ce158.js"><link rel="prefetch" href="/blog/assets/js/37.61cca47a.js"><link rel="prefetch" href="/blog/assets/js/38.e16548bc.js"><link rel="prefetch" href="/blog/assets/js/39.4f0e9200.js"><link rel="prefetch" href="/blog/assets/js/4.f43b130a.js"><link rel="prefetch" href="/blog/assets/js/40.7b5fdb66.js"><link rel="prefetch" href="/blog/assets/js/41.cd1f29dc.js"><link rel="prefetch" href="/blog/assets/js/42.888364b5.js"><link rel="prefetch" href="/blog/assets/js/43.53e84a76.js"><link rel="prefetch" href="/blog/assets/js/44.ff3b5c3d.js"><link rel="prefetch" href="/blog/assets/js/45.84a172f2.js"><link rel="prefetch" href="/blog/assets/js/46.3d4898fd.js"><link rel="prefetch" href="/blog/assets/js/47.cf2d2a26.js"><link rel="prefetch" href="/blog/assets/js/48.cd4e66ef.js"><link rel="prefetch" href="/blog/assets/js/49.3f132860.js"><link rel="prefetch" href="/blog/assets/js/5.a6697eca.js"><link rel="prefetch" href="/blog/assets/js/50.5676f861.js"><link rel="prefetch" href="/blog/assets/js/51.716c2259.js"><link rel="prefetch" href="/blog/assets/js/52.876f897e.js"><link rel="prefetch" href="/blog/assets/js/53.2b15bf9c.js"><link rel="prefetch" href="/blog/assets/js/54.1a8dcd4f.js"><link rel="prefetch" href="/blog/assets/js/55.3b7358ea.js"><link rel="prefetch" href="/blog/assets/js/56.cb28784d.js"><link rel="prefetch" href="/blog/assets/js/58.941684a4.js"><link rel="prefetch" href="/blog/assets/js/59.d6502adf.js"><link rel="prefetch" href="/blog/assets/js/60.9d881d9b.js"><link rel="prefetch" href="/blog/assets/js/61.4518d50d.js"><link rel="prefetch" href="/blog/assets/js/62.ad6217f8.js"><link rel="prefetch" href="/blog/assets/js/63.9620d78a.js"><link rel="prefetch" href="/blog/assets/js/64.fd4e6137.js"><link rel="prefetch" href="/blog/assets/js/65.efee27ed.js"><link rel="prefetch" href="/blog/assets/js/66.fbd71f25.js"><link rel="prefetch" href="/blog/assets/js/67.7608b3bc.js"><link rel="prefetch" href="/blog/assets/js/68.701395fb.js"><link rel="prefetch" href="/blog/assets/js/69.94ebb668.js"><link rel="prefetch" href="/blog/assets/js/70.58f003a3.js"><link rel="prefetch" href="/blog/assets/js/71.46889cab.js"><link rel="prefetch" href="/blog/assets/js/72.d62ef73e.js"><link rel="prefetch" href="/blog/assets/js/73.a53cebc0.js"><link rel="prefetch" href="/blog/assets/js/74.1dbe21d7.js"><link rel="prefetch" href="/blog/assets/js/75.c96760f8.js"><link rel="prefetch" href="/blog/assets/js/76.d77d04d8.js"><link rel="prefetch" href="/blog/assets/js/77.04c2e67d.js"><link rel="prefetch" href="/blog/assets/js/78.1cc0096f.js"><link rel="prefetch" href="/blog/assets/js/79.08e9ba4c.js"><link rel="prefetch" href="/blog/assets/js/8.617d88a3.js"><link rel="prefetch" href="/blog/assets/js/80.54ea277a.js"><link rel="prefetch" href="/blog/assets/js/81.9876b60d.js"><link rel="prefetch" href="/blog/assets/js/82.0bfa21f4.js"><link rel="prefetch" href="/blog/assets/js/83.b0805fca.js"><link rel="prefetch" href="/blog/assets/js/84.35af33e6.js"><link rel="prefetch" href="/blog/assets/js/85.ba3089cc.js"><link rel="prefetch" href="/blog/assets/js/86.a35391ef.js"><link rel="prefetch" href="/blog/assets/js/87.61bc5d71.js"><link rel="prefetch" href="/blog/assets/js/88.0d913b5c.js"><link rel="prefetch" href="/blog/assets/js/89.3908f915.js"><link rel="prefetch" href="/blog/assets/js/9.e93f45bd.js"><link rel="prefetch" href="/blog/assets/js/90.54e885b7.js"><link rel="prefetch" href="/blog/assets/js/91.e39ddc5e.js"><link rel="prefetch" href="/blog/assets/js/92.44ad160b.js"><link rel="prefetch" href="/blog/assets/js/93.d1358e25.js"><link rel="prefetch" href="/blog/assets/js/94.022d521c.js"><link rel="prefetch" href="/blog/assets/js/95.f4a97bc8.js"><link rel="prefetch" href="/blog/assets/js/96.a471c25b.js"><link rel="prefetch" href="/blog/assets/js/97.5db72651.js"><link rel="prefetch" href="/blog/assets/js/98.4ea2328a.js"><link rel="prefetch" href="/blog/assets/js/99.36e1721a.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.45a06a3c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">汪图南</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  前端面试之道
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端书籍" class="dropdown-title"><span class="title">前端书籍</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端书籍" class="mobile-dropdown-title"><span class="title">前端书籍</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JavaScript书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/books/javascript/know-up.html" class="nav-link">
  你不知道的JavaScript(上)
</a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/know-down.html" class="nav-link">
  你不知道的JavaScript(中下)
</a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/algorithm.html" class="nav-link">
  JavaScript数据结构和算法
</a></li><li class="dropdown-subitem"><a href="/blog/designPattern/" class="nav-link">
  JavaScript设计模式与开发实践
</a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/es6.html" class="nav-link">
  深入理解ES6
</a></li></ul></li><li class="dropdown-item"><h4>
          Git书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/books/git/" class="nav-link">
  精通Git
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue源码分析" class="dropdown-title"><span class="title">Vue源码分析</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue源码分析" class="mobile-dropdown-title"><span class="title">Vue源码分析</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vueAnalysis/introduction/" class="nav-link">
  Vue2.0源码分析
</a></li><li class="dropdown-item"><!----> <a href="/blog/vueNextAnalysis/introduction/" class="nav-link">
  Vue3.0源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="自动化测试" class="dropdown-title"><span class="title">自动化测试</span> <span class="arrow down"></span></button> <button type="button" aria-label="自动化测试" class="mobile-dropdown-title"><span class="title">自动化测试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/test/vueTest.html" class="nav-link">
  Vue应用测试
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/webpack/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/rollup/" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/typescript/base.html" class="nav-link">
  TypeScript基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/challenge.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TypeScript类型挑战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS预编译器" class="dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow down"></span></button> <button type="button" aria-label="CSS预编译器" class="mobile-dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/cssPrecompiler/sass/" class="nav-link">
  SASS
</a></li><li class="dropdown-item"><!----> <a href="/blog/cssPrecompiler/sassLoader/" class="nav-link">
  Sass-Loader源码分析
</a></li></ul></div></div><div class="nav-item"><a href="/blog/vuepress/" class="nav-link">
  VuePress
</a></div> <a href="https://github.com/wangtunan/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  前端面试之道
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端书籍" class="dropdown-title"><span class="title">前端书籍</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端书籍" class="mobile-dropdown-title"><span class="title">前端书籍</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JavaScript书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/books/javascript/know-up.html" class="nav-link">
  你不知道的JavaScript(上)
</a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/know-down.html" class="nav-link">
  你不知道的JavaScript(中下)
</a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/algorithm.html" class="nav-link">
  JavaScript数据结构和算法
</a></li><li class="dropdown-subitem"><a href="/blog/designPattern/" class="nav-link">
  JavaScript设计模式与开发实践
</a></li><li class="dropdown-subitem"><a href="/blog/books/javascript/es6.html" class="nav-link">
  深入理解ES6
</a></li></ul></li><li class="dropdown-item"><h4>
          Git书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/books/git/" class="nav-link">
  精通Git
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue源码分析" class="dropdown-title"><span class="title">Vue源码分析</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue源码分析" class="mobile-dropdown-title"><span class="title">Vue源码分析</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vueAnalysis/introduction/" class="nav-link">
  Vue2.0源码分析
</a></li><li class="dropdown-item"><!----> <a href="/blog/vueNextAnalysis/introduction/" class="nav-link">
  Vue3.0源码分析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="自动化测试" class="dropdown-title"><span class="title">自动化测试</span> <span class="arrow down"></span></button> <button type="button" aria-label="自动化测试" class="mobile-dropdown-title"><span class="title">自动化测试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/test/vueTest.html" class="nav-link">
  Vue应用测试
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/webpack/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/rollup/" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/typescript/base.html" class="nav-link">
  TypeScript基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/challenge.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TypeScript类型挑战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS预编译器" class="dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow down"></span></button> <button type="button" aria-label="CSS预编译器" class="mobile-dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/cssPrecompiler/sass/" class="nav-link">
  SASS
</a></li><li class="dropdown-item"><!----> <a href="/blog/cssPrecompiler/sassLoader/" class="nav-link">
  Sass-Loader源码分析
</a></li></ul></div></div><div class="nav-item"><a href="/blog/vuepress/" class="nav-link">
  VuePress
</a></div> <a href="https://github.com/wangtunan/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Type-Challenges</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/typescript/challenge.html#介绍" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/typescript/challenge.html#核心知识点" class="sidebar-link">核心知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#加号和减号" class="sidebar-link">加号和减号</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#keyof-和-in" class="sidebar-link">keyof 和 in</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#typeof" class="sidebar-link">typeof</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#never" class="sidebar-link">never</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#extends" class="sidebar-link">extends</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#infer" class="sidebar-link">infer</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#符号" class="sidebar-link">&amp; 符号</a></li></ul></li><li><a href="/blog/typescript/challenge.html#初级" class="sidebar-link">初级</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置pick-选取" class="sidebar-link">内置Pick(选取)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置readonly-只读" class="sidebar-link">内置Readonly(只读)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#tupletoobject-元组转对象" class="sidebar-link">TupleToObject(元组转对象)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#first-数组第一个元素" class="sidebar-link">First(数组第一个元素)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#length-元组的长度" class="sidebar-link">Length(元组的长度)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置exclude-排除" class="sidebar-link">内置Exclude(排除)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#promisetype-promise包裹类型" class="sidebar-link">PromiseType(promise包裹类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#if-判断" class="sidebar-link">If(判断)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#concat-数组concat方法" class="sidebar-link">Concat(数组concat方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#includes-数组includes方法" class="sidebar-link">Includes(数组includes方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#push-数组push方法" class="sidebar-link">Push(数组push方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#shift和unshift" class="sidebar-link">Shift和Unshift</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置parameters-函数的参数类型" class="sidebar-link">内置Parameters(函数的参数类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置partial-可填-和内置required-必填" class="sidebar-link">内置Partial(可填)和内置Required(必填)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置record-构造" class="sidebar-link">内置Record(构造)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置extract-交集" class="sidebar-link">内置Extract(交集)</a></li></ul></li><li><a href="/blog/typescript/challenge.html#中级" class="sidebar-link">中级</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置returntype-函数返回类型" class="sidebar-link">内置ReturnType(函数返回类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#内置omit-移除" class="sidebar-link">内置Omit(移除)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#readony-按需readonly" class="sidebar-link">Readony(按需Readonly)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#deepreadonly-深度readonly" class="sidebar-link">DeepReadonly(深度Readonly)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#tupletounion-元组转联合类型" class="sidebar-link">TupleToUnion(元组转联合类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#chainable-可串联构造器" class="sidebar-link">Chainable(可串联构造器)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#last-数组最后一个元素" class="sidebar-link">Last(数组最后一个元素)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#pop-数组pop方法" class="sidebar-link">Pop(数组Pop方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#promiseall返回类型" class="sidebar-link">PromiseAll返回类型</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#lookup-查找" class="sidebar-link">LookUp(查找)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#trim、trimleft以及trimright" class="sidebar-link">Trim、TrimLeft以及TrimRight</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#capitalize-首字母大写-和uncapatilize-首字母小写" class="sidebar-link">Capitalize(首字母大写)和Uncapatilize(首字母小写)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#replace和replaceall" class="sidebar-link">Replace和ReplaceAll</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#replaceall" class="sidebar-link">ReplaceAll</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#appendargument-追加参数" class="sidebar-link">AppendArgument(追加参数)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#permutation-排列组合" class="sidebar-link">Permutation(排列组合)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#lengthofstring-字符串的长度" class="sidebar-link">LengthOfString(字符串的长度)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#flatten-数组降维" class="sidebar-link">Flatten(数组降维)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#appendtoobject-对象添加新属性" class="sidebar-link">AppendToObject(对象添加新属性)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#absolute-绝对值" class="sidebar-link">Absolute(绝对值)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#stringtoarray-字符串转数组" class="sidebar-link">StringToArray(字符串转数组)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#stringtounion-字符串转联合类型" class="sidebar-link">StringToUnion(字符串转联合类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#merge-类型合并" class="sidebar-link">Merge(类型合并)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#camelcase-连字符字符串转小驼峰" class="sidebar-link">CamelCase(连字符字符串转小驼峰)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#kebabcase-字符串转连字符" class="sidebar-link">KebabCase(字符串转连字符)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#diff-类型差异部分" class="sidebar-link">Diff(类型差异部分)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#anyof-数组元素真值判断" class="sidebar-link">AnyOf(数组元素真值判断)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#isnever-是否是never类型" class="sidebar-link">IsNever(是否是Never类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#isunion-是否联合类型" class="sidebar-link">IsUnion(是否联合类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#replacekeys-类型替换" class="sidebar-link">ReplaceKeys(类型替换)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#removeindexsignature-移除索引签名" class="sidebar-link">RemoveIndexSignature(移除索引签名)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#percentageparser-百分比解析" class="sidebar-link">PercentageParser(百分比解析)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#dropchar-移除字符" class="sidebar-link">DropChar(移除字符)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#minusone-减一" class="sidebar-link">MinusOne(减一)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#pickbytype-根据类型选取" class="sidebar-link">PickByType(根据类型选取)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#startswith-字符串startswith方法" class="sidebar-link">StartsWith(字符串startsWith方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#endswith-字符串endswith方法" class="sidebar-link">EndsWith(字符串endsWith方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#partialbykeys-按需可选" class="sidebar-link">PartialByKeys(按需可选)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#requiredbykeys-按需必填" class="sidebar-link">RequiredByKeys(按需必填)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#mutable-可改" class="sidebar-link">Mutable(可改)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#omitbytype-按类型移除" class="sidebar-link">OmitByType(按类型移除)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#objectentries" class="sidebar-link">ObjectEntries</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#tupletonestedobject-元组转嵌套对象" class="sidebar-link">TupleToNestedObject(元组转嵌套对象)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#reverse" class="sidebar-link">Reverse</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#fliparguments-反转函数参数" class="sidebar-link">FlipArguments(反转函数参数)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#flattendepth-数组按深度降维" class="sidebar-link">FlattenDepth(数组按深度降维)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#bem" class="sidebar-link">BEM</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#inordertraversal-中序遍历" class="sidebar-link">InOrderTraversal(中序遍历)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#flipobject-对象键值交换" class="sidebar-link">FlipObject(对象键值交换)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#fibonacci-斐波那契数列" class="sidebar-link">Fibonacci(斐波那契数列)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#allcombinations-全排列" class="sidebar-link">AllCombinations(全排列)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#greaterthan-大于" class="sidebar-link">GreaterThan(大于)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#zip-按位置匹配" class="sidebar-link">Zip(按位置匹配)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#istuple-是否为元组" class="sidebar-link">IsTuple(是否为元组)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#chunk-lodash分割数组" class="sidebar-link">Chunk(lodash分割数组)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#fill-数组fill方法" class="sidebar-link">Fill(数组fill方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#without-移除" class="sidebar-link">Without(移除)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#trunc-数学trunc取整" class="sidebar-link">Trunc(数学trunc取整)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#indexof-数组indexof方法" class="sidebar-link">IndexOf(数组indexOf方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#join-数组join方法" class="sidebar-link">Join(数组join方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#lastindexof-数组lastindexof方法" class="sidebar-link">LastIndexOf(数组lastIndexOf方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#unique-数组去重" class="sidebar-link">Unique(数组去重)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#maptypes-类型转换" class="sidebar-link">MapTypes(类型转换)</a></li></ul></li><li><a href="/blog/typescript/challenge.html#困难" class="sidebar-link">困难</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#currying-柯里化" class="sidebar-link">Currying(柯里化)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#uniontointersection-元组取交集" class="sidebar-link">UnionToIntersection(元组取交集)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#requiredkeys-所有必填字段" class="sidebar-link">RequiredKeys(所有必填字段)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#getrequired-必填字段组成的类型" class="sidebar-link">GetRequired(必填字段组成的类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#optionalkeys-所有可选字段" class="sidebar-link">OptionalKeys(所有可选字段)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#getoptional-可选字段组成的类型" class="sidebar-link">GetOptional(可选字段组成的类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#capitalizewords-所有单词首字母大写" class="sidebar-link">CapitalizeWords(所有单词首字母大写)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#camelcase-下划线字符串转小驼峰" class="sidebar-link">CamelCase(下划线字符串转小驼峰)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#parseprintformat-获取字符串格式化参数" class="sidebar-link">ParsePrintFormat(获取字符串格式化参数)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#isany和notany" class="sidebar-link">IsAny和NotAny</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#get-字符串路径取值" class="sidebar-link">Get(字符串路径取值)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#stringtonumber-字符串数字转数字" class="sidebar-link">StringToNumber(字符串数字转数字)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#filterout-数组元素过滤" class="sidebar-link">FilterOut(数组元素过滤)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#tupletoenum-元组转枚举" class="sidebar-link">TupleToEnum(元组转枚举)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#format-字符串格式化函数类型" class="sidebar-link">Format(字符串格式化函数类型)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#lengthofstring-字符串的长度-2" class="sidebar-link">LengthOfString(字符串的长度)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#uniontotuple-联合类型转元组" class="sidebar-link">UnionToTuple(联合类型转元组)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#join-字符串拼接" class="sidebar-link">Join(字符串拼接)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#deeppick-深层次pick" class="sidebar-link">DeepPick(深层次Pick)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#camelize-对象属性键转小驼峰" class="sidebar-link">Camelize(对象属性键转小驼峰)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#dropstring-移除全部字符" class="sidebar-link">DropString(移除全部字符)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#split-字符串split方法" class="sidebar-link">Split(字符串Split方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#isrequredkeys-是否为必填key" class="sidebar-link">IsRequredKeys(是否为必填key)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#objectentries-对象的entries方法" class="sidebar-link">ObjectEntries(对象的entries方法)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#ispalindrome-是否为回文" class="sidebar-link">IsPalindrome(是否为回文)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#mutablekeys-所有可写键" class="sidebar-link">MutableKeys(所有可写键)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#intersection-交集" class="sidebar-link">Intersection(交集)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#binarytodecimal-二进制转十进制" class="sidebar-link">BinaryToDecimal(二进制转十进制)</a></li></ul></li><li><a href="/blog/typescript/challenge.html#地狱" class="sidebar-link">地狱</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="type-challenges"><a href="#type-challenges" class="header-anchor">#</a> Type-Challenges</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p>在学习完<code>TypeScript</code>一些基础知识后，我们已经可以熟练使用一些基本类型定义了，但对于<code>TypeScript</code>的高级用法却依旧无法入门，为了更有趣的学习<code>TypeScript</code>高级用法，我们选择<a href="https://github.com/type-challenges/type-challenges/blob/master/README.zh-CN.md" target="_blank" rel="noopener noreferrer">Type-Challenges<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>类型挑战来作为我们学习的目标。</p> <p>在<code>Type-Challenges</code>中，可以从<code>简单</code>、<code>中等</code>、<code>困难</code>以及<code>地狱</code>难度，循序渐进的学习<code>TypeScript</code>高级技巧。</p> <p>如果你需要选择其他的方向来深入学习<code>TypeScript</code>高级技巧，这里也有一些推荐的开源项目：</p> <ul><li>官方内置：在<code>lib.es5.d.ts</code>文件中，<code>TypeScript</code>官方默认内置了一些辅助工具函数，例如：<code>Partial</code>、<code>Required</code>、<code>Pick</code>以及<code>Record</code>等等。</li> <li>非官方开源库：<a href="https://github.com/piotrwitek/utility-types" target="_blank" rel="noopener noreferrer">utility-types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/millsp/ts-toolbelt" target="_blank" rel="noopener noreferrer">ts-toolbelt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/andnp/SimplyTyped" target="_blank" rel="noopener noreferrer">SimplyTyped<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>在之后的挑战中，我们会尽力对每道题进行必要的讲解，力争在进行<code>Type-Challenges</code>类型挑战时弄清楚所有涉及到的知识点。</p> <h2 id="核心知识点"><a href="#核心知识点" class="header-anchor">#</a> 核心知识点</h2> <h3 id="加号和减号"><a href="#加号和减号" class="header-anchor">#</a> 加号和减号</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>加号和减号的用法类似。</p></div> <p>在一些内置工具中，可能会出现<code>+</code>或者<code>-</code>这些符号，例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ name: string; age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Required<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><p>观察以上结果可以得出结论：<code>-?</code>是去掉类型中属性后面的<code>?</code>，整个<code>Required</code>的实际效果是去掉<code>T</code>类型中所有属性键后面的<code>?</code>，让所有属性变成必填的。</p> <h3 id="keyof-和-in"><a href="#keyof-和-in" class="header-anchor">#</a> keyof 和 in</h3> <p><code>keyof</code>和<code>in</code>经常会连在一起使用，当它们连在一起使用时，通常表示一个迭代的过程。</p> <h4 id="keyof"><a href="#keyof" class="header-anchor">#</a> keyof</h4> <p>在<code>TS</code>中，<code>keyof T</code>这段代码表示获取<code>T</code>类型中所有属性键，这些属性键组合成一个联合类型，例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 'name' | 'age'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person
</code></pre></div><p><code>TS</code>中的<code>keyof T</code>，它有点类似<code>JavaScript</code>中的<code>Object.keys()</code>，它们的共同点都是获取属性键的集合，只不过<code>keyof T</code>得到的结果是一个联合类型，而<code>Object.keys()</code>得到的是一个数组。</p> <h4 id="in"><a href="#in" class="header-anchor">#</a> in</h4> <p><code>in</code>操作符的右侧通常跟一个联合类型，可以使用<code>in</code>来迭代这个联合类型，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 仅演示使用</span>
<span class="token keyword">in</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'sex'</span>
<span class="token string">'name'</span> <span class="token comment">// 第一次迭代结果</span>
<span class="token string">'age'</span>  <span class="token comment">// 第二次迭代结果</span>
<span class="token string">'sex'</span>  <span class="token comment">// 第三次迭代结果</span>
</code></pre></div><p>根据<code>keyof</code>和<code>in</code>的特点，我们可以撰写一些辅助工具，这里以<code>Readonly</code>为例。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果：{ readony name: string; readonly age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>[P in keyof T]</code>：这段代码表示遍历<code>T</code>中的每一个属性键，每次遍历时属性键取名为<code>P</code>，这和<code>JavaScript</code>中的<code>for in</code>非常类似：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ts中的迭代</span>
<span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span>

<span class="token comment">// JavaScript中的迭代</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> 
</code></pre></div><h3 id="typeof"><a href="#typeof" class="header-anchor">#</a> typeof</h3> <p><code>TS</code>中的<code>typeof</code>，可以用来获取一个<code>JavaScript</code>变量的类型，通常用于获取一个普通对象或者一个函数的类型，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'AAA'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">23</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：(a: number, b:number) =&gt; number</span>
<span class="token keyword">type</span> <span class="token class-name">t1</span>  <span class="token operator">=</span> <span class="token keyword">typeof</span> add
<span class="token comment">// 结果：{ name: string; age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj
</code></pre></div><h3 id="never"><a href="#never" class="header-anchor">#</a> never</h3> <p><code>never</code>类型表示永远不会有值的一种类型。</p> <p>例如，如果一个函数抛出一个错误，那么这个函数就可以用<code>never</code>或者<code>void</code>来表示其返回值，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">handlerError</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">handlerError</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>关于<code>never</code>的另外一个知识点是：如果一个联合类型中存在<code>never</code>，那么实际的联合类型并不会包含<code>never</code>，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 定义</span>
<span class="token keyword">type</span> <span class="token class-name">test</span> <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token builtin">never</span>
<span class="token comment">// 实际</span>
<span class="token keyword">type</span> <span class="token class-name">test</span> <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span>
</code></pre></div><h3 id="extends"><a href="#extends" class="header-anchor">#</a> extends</h3> <p><code>extends</code>关键词，一般有两种用法：<strong>类型约束</strong>和<strong>条件类型</strong>。</p> <h4 id="类型约束"><a href="#类型约束" class="header-anchor">#</a> 类型约束</h4> <p>类型约束经常和泛型一起使用：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 类型约束</span>
<span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
</code></pre></div><p><code>keyof T</code>是一个整体，它表示一个联合类型。<code>U extends Union</code>这一整段表示<code>U</code>的类型被收缩在一个联合类型的范围内。</p> <h4 id="条件类型"><a href="#条件类型" class="header-anchor">#</a> 条件类型</h4> <p>常见的条件类型表现形式如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token string">'Y'</span> <span class="token operator">:</span> <span class="token string">'N'</span>
</code></pre></div><p>我们发现条件类型有点像<code>JavaScript</code>中的三元表达式，事实上它们的工作原理是类似的，例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">res1</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">boolean</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>                  <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name">res2</span> <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token keyword">extends</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'age'</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>           <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name">res3</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name">res4</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>       <span class="token comment">// true</span>
</code></pre></div><p>在条件类型中，有一个特别需要注意的东西就是：<strong>分布式条件类型</strong>，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 内置工具：交集</span>
<span class="token keyword">type</span> <span class="token class-name">Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">type1</span> <span class="token operator">=</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'age'</span>
<span class="token keyword">type</span> <span class="token class-name">type2</span> <span class="token operator">=</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span>

<span class="token comment">// 结果：'name'</span>
<span class="token keyword">type</span> <span class="token class-name">test</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span>type1<span class="token punctuation">,</span> type2<span class="token operator">&gt;</span>

<span class="token comment">// 推理步骤</span>
<span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'age'</span> <span class="token keyword">extends</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token function">step1：</span> <span class="token punctuation">(</span><span class="token string">'name'</span> <span class="token keyword">extends</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token string">'name'</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'name'</span>
step2<span class="token operator">:</span>  <span class="token punctuation">(</span><span class="token string">'age'</span> <span class="token keyword">extends</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token string">'age'</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span>   <span class="token operator">=&gt;</span> <span class="token builtin">never</span>
result<span class="token operator">:</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token builtin">never</span> <span class="token operator">=&gt;</span> <span class="token string">'name'</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends U ? T : never</code>：因为<code>T</code>是一个联合类型，所以这里适用于<strong>分布式条件类型</strong>的概念。根据其概念，在实际的过程中会把<code>T</code>类型中的每一个子类型进行迭代，如下：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一次迭代：</span>
<span class="token string">'name'</span> <span class="token keyword">extends</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token string">'name'</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token comment">// 第二次迭代：</span>
<span class="token string">'age'</span> <span class="token keyword">extends</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token string">'age'</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><ul><li>在迭代完成之后，会把每次迭代的结果组合成一个新的联合类型(根据<code>never</code>类型的特点，最后的结果会剔除掉<code>never</code>)，如下：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token builtin">never</span> <span class="token operator">=&gt;</span> <span class="token string">'name'</span>
</code></pre></div><h3 id="infer"><a href="#infer" class="header-anchor">#</a> infer</h3> <p><code>infer</code>关键词的作用是延时推导，它会在类型未推导时进行占位，等到真正推导成功后，它能准确的返回正确的类型。</p> <p>为了更好的理解<code>infer</code>关键词的用法，我们使用<code>ReturnType</code>这个例子来说明，<code>ReturnType</code>是一个用来获取函数返回类型的工具。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
<span class="token comment">// 结果: number</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> add<span class="token operator">&gt;</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends (...args: any) =&gt; infer R</code>：如果不看<code>infer R</code>，这段代码实际表示：<code>T</code>是不是一个函数类型。</li> <li><code>(...args: any) =&gt; infer R</code>：这段代码实际表示一个函数类型，其中把它的参数使用<code>args</code>来表示，把它的返回类型用<code>R</code>来进行占位。
如果<code>T</code>满足是一个函数类型，那么我们返回其函数的返回类型，也就是<code>R</code>；如果不是一个函数类型，就返回<code>never</code>。</li></ul> <h3 id="符号"><a href="#符号" class="header-anchor">#</a> &amp; 符号</h3> <p>在<code>TS</code>中有两种类型值得我们重点关注：<strong>联合类型</strong>和<strong>交叉类型</strong>。</p> <p>联合类型一般适用于基本类型的&quot;合并&quot;，它使用<code>|</code>符号进行连接，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token keyword">null</span>
</code></pre></div><p>而交叉类型则适用于对象或者函数的&quot;合并&quot;，它使用<code>&amp;</code>符号进行连接，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span>
</code></pre></div><p><code>T &amp; U</code>表示一个新的类型，其中这个类型包含<code>T</code>和<code>U</code>中所有的键，这和<code>JavaScript</code>中的<code>Object.assign()</code>函数的作用非常类似。</p> <p>根据交叉类型的概念，我们可以封装一个合并对象的<code>merge</code>函数，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">merge</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>to<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> from<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">;</span><span class="token punctuation">(</span>to <span class="token keyword">as</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> from<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> to <span class="token keyword">as</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'AAA'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span>
<span class="token comment">// 结果：{ name：'AAA'; age: 23; }</span>
<span class="token keyword">const</span> resutl <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span>
</code></pre></div><h2 id="初级"><a href="#初级" class="header-anchor">#</a> 初级</h2> <h3 id="内置pick-选取"><a href="#内置pick-选取" class="header-anchor">#</a> 内置Pick(选取)</h3> <h4 id="用法"><a href="#用法" class="header-anchor">#</a> 用法</h4> <p><code>Pick</code>表示从一个类型中选取指定的几个字段组合成一个新的类型，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  sex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果: { name: string; address: string; }</span>
<span class="token keyword">type</span> <span class="token class-name">PickResult</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'address'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式"><a href="#实现方式" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyPick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>K extends keyof T</code>：表示<code>K</code>只能是<code>keyof T</code>的子类型，如果我们在使用<code>Pick</code>的时候传递了不存在于<code>T</code>的字段，会报错：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 报错：phone无法分配给keyof T</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> MyPick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'phone'</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="内置readonly-只读"><a href="#内置readonly-只读" class="header-anchor">#</a> 内置Readonly(只读)</h3> <h4 id="用法-2"><a href="#用法-2" class="header-anchor">#</a> 用法</h4> <p><code>Readonly</code>是用来让所有属性变为只读，其用法为：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ readonly name: string; readonly age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">ReadonlyResult</span> <span class="token operator">=</span> MyReadonly<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-2"><a href="#实现方式-2" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="tupletoobject-元组转对象"><a href="#tupletoobject-元组转对象" class="header-anchor">#</a> TupleToObject(元组转对象)</h3> <h4 id="用法-3"><a href="#用法-3" class="header-anchor">#</a> 用法</h4> <p><code>TupleToObject&lt;T&gt;</code>是用来把一个元组转换成一个<code>key/value</code>相同的对象，例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> tuple <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
<span class="token comment">// 结果：{ msg: 'msg'; name: 'name'; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> TupleToObject<span class="token operator">&lt;</span><span class="token keyword">typeof</span> tuple<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-3"><a href="#实现方式-3" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">TupleToObject<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">P</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>as const</code>：常用来进行常量断言，在此处表示将<code>['msg','name']</code>推导常量元组，表示其不能新增、删除、修改元素，可以使用<code>as readonly</code>来辅助理解。</li> <li><code>T[number]</code>：表示返回所有数字型索引的元素，形成一个联合类型，例如：<code>'msg'|'name'</code>。</li></ul> <h3 id="first-数组第一个元素"><a href="#first-数组第一个元素" class="header-anchor">#</a> First(数组第一个元素)</h3> <h4 id="用法-4"><a href="#用法-4" class="header-anchor">#</a> 用法</h4> <p><code>First&lt;T&gt;</code>用来返回数组的第一个元素，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：3</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> First<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：never</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> First<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-4"><a href="#实现方式-4" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 索引实现方式</span>
<span class="token keyword">type</span> <span class="token class-name">First<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token comment">// 占位实现方式</span>
<span class="token keyword">type</span> <span class="token class-name">First<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends []</code>：用来判断<code>T</code>是否是一个空数组。</li> <li><code>T[0]</code>：根据下标取数组第一个元素。</li> <li><code>infer R</code>： 表示数组第一个元素的占位。</li> <li><code>...infer L</code>: 表示数组剩余元素的占位。</li></ul> <h3 id="length-元组的长度"><a href="#length-元组的长度" class="header-anchor">#</a> Length(元组的长度)</h3> <h4 id="用法-5"><a href="#用法-5" class="header-anchor">#</a> 用法</h4> <p><code>Length&lt;T&gt;</code>用来获取一个数组(包括类数组)的长度，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：3</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> Length<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：10</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> Length<span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token number">5</span><span class="token operator">:</span> <span class="token string">'5'</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-5"><a href="#实现方式-5" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Length<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends { length: number; }</code>：判断<code>T</code>是否是<code>{ length: number; }</code>的子类型，如果是则代表<code>T</code>为数组或者类数组。</li> <li><code>T['length']</code>：取<code>T</code>对象的<code>length</code>属性的值(注意，在<code>TypeScript</code>中不能使用<code>T.length</code>来取值，而应该使用<code>T['length']</code>)。</li></ul> <h3 id="内置exclude-排除"><a href="#内置exclude-排除" class="header-anchor">#</a> 内置Exclude(排除)</h3> <h4 id="用法-6"><a href="#用法-6" class="header-anchor">#</a> 用法</h4> <p><code>Exclude</code>是排除的意思，它从<code>T</code>类型中排除属于<code>U</code>类型的子集，可以理解成取<code>T</code>对于<code>U</code>的差集，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'name'|'age'</span>
<span class="token keyword">type</span> <span class="token class-name">ExcludeResult</span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'sex'</span><span class="token punctuation">,</span> <span class="token string">'sex'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-6"><a href="#实现方式-6" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyExclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><ul><li><code>T extends U</code>：这段代码会从<code>T</code>的子类型开始分发，例如：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> 
<span class="token operator">=&gt;</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token keyword">extends</span> <span class="token string">'sex'</span><span class="token operator">|</span><span class="token string">'address'</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token string">'name'</span> <span class="token keyword">extends</span> <span class="token string">'sex'</span><span class="token operator">|</span><span class="token string">'address'</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token string">'name'</span> <span class="token operator">|</span>
  <span class="token string">'age'</span> <span class="token keyword">extends</span> <span class="token string">'sex'</span><span class="token operator">|</span><span class="token string">'address'</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token string">'age'</span> <span class="token operator">|</span>
  <span class="token string">'sex'</span> <span class="token keyword">extends</span> <span class="token string">'sex'</span><span class="token operator">|</span><span class="token string">'address'</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token string">'sex'</span>
<span class="token punctuation">)</span>
<span class="token operator">=&gt;</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'age'</span>
</code></pre></div><h3 id="promisetype-promise包裹类型"><a href="#promisetype-promise包裹类型" class="header-anchor">#</a> PromiseType(promise包裹类型)</h3> <h4 id="用法-7"><a href="#用法-7" class="header-anchor">#</a> 用法</h4> <p><code>PromiseType</code>是用来获取<code>Promise</code>包裹类型的，例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果：(） =&gt; Promise&lt;string|number&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">funcType</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> getInfo
<span class="token comment">// 结果：Promise&lt;string|number&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">returnResult</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span>funcType<span class="token operator">&gt;</span>
<span class="token comment">// 结果：string|number</span>
<span class="token keyword">type</span> <span class="token class-name">PromiseResult</span> <span class="token operator">=</span> PromiseType<span class="token operator">&lt;</span>returnResult<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-7"><a href="#实现方式-7" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PromiseType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span>
    <span class="token operator">?</span> <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span>
      <span class="token operator">?</span> PromiseType<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token constant">R</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends Promise&lt;infer R&gt;</code>：判断<code>T</code>是否是<code>Promise&lt;infer R&gt;</code>的子类型，也就是说<code>T</code>必须满足<code>Promise&lt;any&gt;</code>的形式。</li></ul> <h3 id="if-判断"><a href="#if-判断" class="header-anchor">#</a> If(判断)</h3> <h4 id="用法-8"><a href="#用法-8" class="header-anchor">#</a> 用法</h4> <p><code>If&lt;C, T, F&gt;</code>用来表示根据<code>C</code>的值来返回<code>T</code>或者<code>F</code>，如果<code>C</code>为<code>true</code>，则返回<code>T</code>；如果<code>C</code>为<code>false</code>，则返回<code>F</code>，例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'a'</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> If<span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：'b'</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> If<span class="token operator">&lt;</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span>
</code></pre></div><p>根据上案例，我们可以直观的发现<code>If&lt;C, T, F&gt;</code>的作用有点类似<code>JavaScript</code>中的三元表达式：<code>C ? T : F</code>。</p> <h4 id="实现方式-8"><a href="#实现方式-8" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">If<span class="token operator">&lt;</span><span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">F</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token constant">F</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>C extends boolean</code>：表示<code>C</code>为<code>boolean</code>类型的子类型，既<code>C</code>只能为<code>true</code>或者<code>false</code>，传递其它值报错。</li> <li><code>C extends true</code>：如果用<code>JavaScript</code>来表示的话，相当于<code>C===true</code>.</li></ul> <h3 id="concat-数组concat方法"><a href="#concat-数组concat方法" class="header-anchor">#</a> Concat(数组concat方法)</h3> <h4 id="用法-9"><a href="#用法-9" class="header-anchor">#</a> 用法</h4> <p><code>Concat&lt;T, U&gt;</code>用来将两个数组合并起来，类似实现数组的<code>concat</code>方法，使用方式如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[1, 2, 3, 4]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Concat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-9"><a href="#实现方式-9" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Concat<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends any[]</code>：用来限制<code>T</code>是一个数组，如果传递非数组会报错，<code>U</code>也是一样的道理。</li> <li><code>[...T, ...U]</code>：可以理解成<code>JavaScript</code>的扩展运算符<code>...</code>。</li></ul> <h3 id="includes-数组includes方法"><a href="#includes-数组includes方法" class="header-anchor">#</a> Includes(数组includes方法)</h3> <h4 id="用法-10"><a href="#用法-10" class="header-anchor">#</a> 用法</h4> <p><code>Includes&lt;T, U&gt;</code>用来判断<code>U</code>是否在数组<code>T</code>中，类似实现数组的<code>includes</code>方法，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：false</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-10"><a href="#实现方式-10" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Equal<span class="token operator">&lt;</span><span class="token constant">X</span><span class="token punctuation">,</span> <span class="token constant">Y</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">X</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">extends</span>
  <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">Y</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>

<span class="token comment">// 简单版</span>
<span class="token keyword">type</span> <span class="token class-name">MyIncludes<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token comment">// 完善版</span>
<span class="token keyword">type</span> <span class="token class-name">MyIncludes<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> Equal<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span>
      <span class="token operator">?</span> <span class="token boolean">true</span>
      <span class="token operator">:</span> MyIncludes<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T[number]</code>：它返回数组中所有数字类型键对应的值，将这些值构造成一个联合类型，例如：<code>1 | 2 | 3</code>。</li> <li><code>U extends T[number]</code>：判断<code>U</code>是否是某个联合类型的子类型，例如：<code>1 extends 1 | 2 | 3</code>。</li> <li><code>Equal</code>：是用来判断两个值是否相等的辅助方法。</li></ul> <h3 id="push-数组push方法"><a href="#push-数组push方法" class="header-anchor">#</a> Push(数组push方法)</h3> <h4 id="用法-11"><a href="#用法-11" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[1, 2, 3, 4]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-11"><a href="#实现方式-11" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Push实现</span>
<span class="token keyword">type</span> <span class="token class-name">Push<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="shift和unshift"><a href="#shift和unshift" class="header-anchor">#</a> Shift和Unshift</h3> <p>与<code>pop</code>和<code>push</code>方法相似的另外一对方法叫<code>shift</code>和<code>unshift</code>，它们的实现思路是一样的。</p> <h4 id="用法-12"><a href="#用法-12" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Shift结果：[2, 3]</span>
<span class="token keyword">type</span> <span class="token class-name">shiftResult</span> <span class="token operator">=</span> Shift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token comment">// Unshift结果：[0, 1, 2, 3]</span>
<span class="token keyword">type</span> <span class="token class-name">unshiftResult</span> <span class="token operator">=</span> Unshift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="使用方式"><a href="#使用方式" class="header-anchor">#</a> 使用方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Shift实现</span>
<span class="token keyword">type</span> <span class="token class-name">Shift<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token comment">// Unshift实现</span>
<span class="token keyword">type</span> <span class="token class-name">Unshift<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="内置parameters-函数的参数类型"><a href="#内置parameters-函数的参数类型" class="header-anchor">#</a> 内置Parameters(函数的参数类型)</h3> <h4 id="用法-13"><a href="#用法-13" class="header-anchor">#</a> 用法</h4> <p><code>Parameters</code>是用来获取一个函数的参数类型的，其中获取的结果是一个元组，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// [number, string]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> MyParameters<span class="token operator">&lt;</span><span class="token keyword">typeof</span> add<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-12"><a href="#实现方式-12" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyParameters<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><h3 id="内置partial-可填-和内置required-必填"><a href="#内置partial-可填-和内置required-必填" class="header-anchor">#</a> 内置Partial(可填)和内置Required(必填)</h3> <h4 id="用法-14"><a href="#用法-14" class="header-anchor">#</a> 用法</h4> <p><code>Partial</code>和<code>Required</code>一个是让所有属性可填、另外一个是让所有属性必填，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果: { name?: string; age?: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">PartialResult</span> <span class="token operator">=</span> MyPartial<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>

<span class="token comment">// 结果: { name: string; age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">RequiredResult</span> <span class="token operator">=</span> MyRequired<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> 
</code></pre></div><h4 id="实现方式-13"><a href="#实现方式-13" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">MyRequired<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="内置record-构造"><a href="#内置record-构造" class="header-anchor">#</a> 内置Record(构造)</h3> <h4 id="用法-15"><a href="#用法-15" class="header-anchor">#</a> 用法</h4> <p><code>Record&lt;K, T&gt;</code>用来将<code>K</code>的每一个键(<code>k</code>)指定为<code>T</code>类型，这样由多个<code>k/T</code>组合成了一个新的类型，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">keys</span> <span class="token operator">=</span> <span class="token string">'Cat'</span><span class="token operator">|</span><span class="token string">'Dot'</span>
<span class="token keyword">type</span> <span class="token class-name">Animal</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Expected</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  Cat<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  Dog<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：Expected</span>
<span class="token keyword">type</span> <span class="token class-name">RecordResult</span> <span class="token operator">=</span> Record<span class="token operator">&lt;</span>keys<span class="token punctuation">,</span> Animal<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-14"><a href="#实现方式-14" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyRecord<span class="token operator">&lt;</span>k <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>k extends keyof any</code>：此代码表示<code>K</code>是<code>keyof any</code>任意类型其所有键的子类型，例如：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// K为 'Dog'|'cat'</span>
<span class="token keyword">type</span> <span class="token class-name">UnionKeys</span> <span class="token operator">=</span> <span class="token string">'Dog'</span> <span class="token operator">|</span> <span class="token string">'Cat'</span>

<span class="token comment">// K为'name'|'age'</span>
<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">TypeKeys</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person
</code></pre></div><h3 id="内置extract-交集"><a href="#内置extract-交集" class="header-anchor">#</a> 内置Extract(交集)</h3> <h4 id="用法-16"><a href="#用法-16" class="header-anchor">#</a> 用法</h4> <p><code>Extract&lt;T, U&gt;</code>用来取联合类型<code>T</code>和<code>U</code>的交集，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：'age'|'address'</span>
<span class="token keyword">type</span> <span class="token class-name">ExtractResult</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token keyword">keyof</span> Person<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-15"><a href="#实现方式-15" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyExtract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends U</code>：此代码会自动将<code>T</code>的子类型进行分发，例如：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span>
<span class="token operator">=&gt;</span> <span class="token string">'name'</span><span class="token operator">|</span><span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'address'</span> <span class="token keyword">extends</span> <span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token function-variable function">T</span> <span class="token operator">:</span> <span class="token parameter">never</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token string">'name'</span> <span class="token keyword">extends</span> <span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token string">'name'</span> <span class="token operator">:</span> never <span class="token operator">|</span>
  <span class="token string">'age'</span> <span class="token keyword">extends</span> <span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'sex'</span> <span class="token operator">?</span> <span class="token string">'age'</span> <span class="token operator">:</span> never <span class="token operator">|</span>
  <span class="token string">'address'</span> <span class="token keyword">extends</span> <span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'address'</span><span class="token operator">|</span><span class="token string">'address'</span> <span class="token operator">?</span> <span class="token string">'age'</span> <span class="token operator">:</span> never
<span class="token punctuation">)</span>
<span class="token operator">=&gt;</span> <span class="token string">'age'</span><span class="token operator">|</span><span class="token string">'address'</span>
</code></pre></div><h2 id="中级"><a href="#中级" class="header-anchor">#</a> 中级</h2> <h3 id="内置returntype-函数返回类型"><a href="#内置returntype-函数返回类型" class="header-anchor">#</a> 内置ReturnType(函数返回类型)</h3> <h4 id="用法-17"><a href="#用法-17" class="header-anchor">#</a> 用法</h4> <p><code>ReturnType&lt;T&gt;</code>是用来获取一个函数的返回类型的，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getRandom</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果：number</span>
type result <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> getRandom<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-16"><a href="#实现方式-16" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends (...args: any) =&gt; infer R</code>：判断<code>T</code>类型是否是一个函数的子类型，既<code>T</code>是不是一个函数。</li> <li><code>infer R</code>：表示待推导的函数返回类型为<code>R</code>，后续可以在表达式中使用<code>R</code>来代替真正的返回类型。</li></ul> <h3 id="内置omit-移除"><a href="#内置omit-移除" class="header-anchor">#</a> 内置Omit(移除)</h3> <h4 id="用法-18"><a href="#用法-18" class="header-anchor">#</a> 用法</h4> <p><code>Omit</code>是移除的意思，它用来在<code>T</code>类型中移除指定的字段，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ name？: string; age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">OmitResult</span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-17"><a href="#实现方式-17" class="header-anchor">#</a> 实现方式</h4> <p><code>Omit</code>可以借助在上面已经实现过的<code>Pick</code>和<code>Exclude</code>配合来实现，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Omit实现</span>
<span class="token keyword">type</span> <span class="token class-name">MyOmit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> MyPick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> MyExclude<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><p>代码详解：</p> <ul><li>使用<code>MyExclude&lt;keyof T, K&gt;</code>，可以从<code>T</code>中移除指定的字段，移除后得到一个新的联合类型：<code>'name'|'age'</code></li> <li>使用<code>MyPick&lt;T, 'name'|'age'&gt;</code>，可以从<code>T</code>中选取这两个字段，组合成一个新的类型。</li></ul> <h3 id="readony-按需readonly"><a href="#readony-按需readonly" class="header-anchor">#</a> Readony(按需Readonly)</h3> <h4 id="用法-19"><a href="#用法-19" class="header-anchor">#</a> 用法</h4> <p>不同于初级实现中的<code>Readonly</code>，在中级实现的<code>Readonly</code>中，如果我们传递了指定的字段，那么<code>Readonly</code>会表现为按需实现<code>readonly</code>，用法如下。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  desc<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Expected1</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> desc<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> completed<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Expected2</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> desc<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> completed<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：Expected1</span>
<span class="token keyword">type</span> <span class="token class-name">ReadonlyResult1</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span>Todo<span class="token operator">&gt;</span>
<span class="token comment">// 结果：Expected2</span>
<span class="token keyword">type</span> <span class="token class-name">ReadonlyResult2</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span>Todo<span class="token punctuation">,</span> <span class="token string">'desc'</span><span class="token operator">|</span><span class="token string">'completed'</span><span class="token operator">&gt;</span>

<span class="token comment">// 测试：</span>
<span class="token keyword">const</span> obj<span class="token operator">:</span> ReadonlyResult2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'AAA'</span><span class="token punctuation">,</span>
  desc<span class="token operator">:</span> <span class="token string">'23'</span><span class="token punctuation">,</span>
  completed<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'aaa'</span>
obj<span class="token punctuation">.</span>desc <span class="token operator">=</span> <span class="token string">'32'</span> <span class="token comment">// error</span>
obj<span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// error</span>
</code></pre></div><h4 id="实现方式-18"><a href="#实现方式-18" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ts v4.4+版本可直接用</span>
<span class="token keyword">type</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// ts v4.5+版本必须用</span>
<span class="token keyword">type</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>K extends keyof T = keyof T</code>：如要传递了<code>K</code>，那么只能是<code>T</code>中已经存在的属性，不存在则报错；如果不传递，则默认值为<code>keyof T</code>，意味着全部属性都添加<code>readonly</code>。</li> <li><code>T &amp; U</code>：在本例中表示将<code>T</code>和<code>U</code>中的字段结合起来，如果没有<code>&amp;</code>会丢失一些属性，例如<code>title</code>。</li></ul> <h3 id="deepreadonly-深度readonly"><a href="#deepreadonly-深度readonly" class="header-anchor">#</a> DeepReadonly(深度Readonly)</h3> <h4 id="用法-20"><a href="#用法-20" class="header-anchor">#</a> 用法</h4> <p><code>DeepReadonly</code>用来将一个嵌套对象类型中所有字段全部添加<code>readonly</code>关键词，例如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 类型：</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">X</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  b<span class="token operator">:</span> <span class="token builtin">string</span>
  c<span class="token operator">:</span> <span class="token punctuation">{</span>
    d<span class="token operator">:</span> <span class="token builtin">boolean</span>
    e<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    f<span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果：</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">Y</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> b<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> c<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> d<span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token keyword">readonly</span> e<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">readonly</span> f<span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="实现方式-19"><a href="#实现方式-19" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">DeepReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span> <span class="token operator">?</span> DeepReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T[P] extends { [key: string]: any }</code>：这段表示<code>T[P]</code>是否是一个包含索引签名的字段，如果包含我们认为它是一个嵌套对象，就可以递归调用<code>DeepReadonly</code>。</li></ul> <h3 id="tupletounion-元组转联合类型"><a href="#tupletounion-元组转联合类型" class="header-anchor">#</a> TupleToUnion(元组转联合类型)</h3> <h4 id="用法-21"><a href="#用法-21" class="header-anchor">#</a> 用法</h4> <p><code>TupleToUnion</code>是用来将一个元组转换成联合类型的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'1' | '2' | '3'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> TupleToUnion<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-20"><a href="#实现方式-20" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// way1: T[number]</span>
<span class="token keyword">type</span> <span class="token class-name">TupleToUnion<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span>
<span class="token comment">// way2: 递归</span>
<span class="token keyword">type</span> <span class="token class-name">TupleToUnion<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> args<span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">|</span> TupleToUnion<span class="token operator">&lt;</span>args<span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T[number]</code>：它会自动迭代元组的数字型索引，然后将所有元素组合成一个联合类型。</li> <li><code>R | TupleToUnion&lt;args&gt;</code>：<code>R</code>表示每一次迭代中的第一个元素，它的迭代过程可以用下面伪代码表示：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一次迭代</span>
<span class="token keyword">const</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'1'</span>
<span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">|</span> TupleToUnion<span class="token operator">&lt;</span>args<span class="token operator">&gt;</span>

<span class="token comment">// 第二次迭代</span>
<span class="token keyword">const</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'2'</span>
<span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'3'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span> <span class="token operator">|</span> TupleToUnion<span class="token operator">&lt;</span>args<span class="token operator">&gt;</span>

<span class="token comment">// 第三次迭代</span>
<span class="token keyword">const</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'3'</span>
<span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span> <span class="token operator">|</span> <span class="token string">'3'</span>
</code></pre></div><h3 id="chainable-可串联构造器"><a href="#chainable-可串联构造器" class="header-anchor">#</a> Chainable(可串联构造器)</h3> <h4 id="用法-22"><a href="#用法-22" class="header-anchor">#</a> 用法</h4> <p><code>Chainable</code>是用来让一个对象可以进行链式调用的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Expected</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token builtin">number</span>
  bar<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token punctuation">}</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> obj<span class="token operator">:</span> Chainable<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：Expected</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> obj
  <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'Hello'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'TypeScript'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="实现方式-21"><a href="#实现方式-21" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Chainable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token generic-function"><span class="token function">options</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token operator">:</span> Chainable<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>k <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>{[k in K]: V}</code>：每次调用<code>options</code>时，把<code>key/value</code>构造成一个对象，例如：<code>{ foo: 123 }</code>。</li> <li><code>T &amp; U</code>：此处使用到<code>&amp;</code>关键词，用来合并<code>T</code>和<code>U</code>两个对象中的所有<code>key</code>。</li> <li><code>Chainable&lt;&gt;</code>：递归调用<code>Chainable</code>，赋予新对象以链式调用的能力。</li></ul> <h3 id="last-数组最后一个元素"><a href="#last-数组最后一个元素" class="header-anchor">#</a> Last(数组最后一个元素)</h3> <h4 id="用法-23"><a href="#用法-23" class="header-anchor">#</a> 用法</h4> <p><code>Last</code>是用来获取数组中最后一个元素的，它和我们之前已经实现的<code>First</code>思路很相似。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：3</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Last<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-22"><a href="#实现方式-22" class="header-anchor">#</a> 实现方式</h4> <p><code>Last</code>的实现方式很巧妙，因为它既可以在索引上做文章来实现，也可以用占位的思想来实现。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// way1：索引思想</span>
<span class="token keyword">type</span> <span class="token class-name">Last<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment">// way2: 后占位思想</span>
<span class="token keyword">type</span> <span class="token class-name">Last<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">L</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>[any, ...T]</code>：此代码表示我们构建了一个新数组，并添加了一个新元素到第一个位置，然后把原数组<code>T</code>中的元素依次扩展到新数组中，可以用以下伪代码表示：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 原数组</span>
<span class="token keyword">const</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">// 新数组</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">// 结果: 3</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><ul><li><code>T['length']</code>：这里我们获取到的是原始<code>T</code>数组的长度，例如<code>[1, 2, 3]</code>，长度值为<code>3</code>。而在新数组中，索引为<code>3</code>的位置正好是最后一个元素的索引，通过这种方式就能达到我们的目的。</li> <li><code>T extends [...infer R, infer L]</code>：这段代码表示，我们将原数组中最后一个元素使用<code>L</code>进行占位，而其它元素我们用一个<code>R</code>数组表示。这样，如果数组满足这种格式，就能正确返回最后一个元素的值。</li></ul> <h3 id="pop-数组pop方法"><a href="#pop-数组pop方法" class="header-anchor">#</a> Pop(数组Pop方法)</h3> <p>继续沿用以上处理索引思想或占位的思想，我们能快速实现数组<code>pop</code>方法。</p> <h4 id="用法-24"><a href="#用法-24" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[1, 2]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Pop<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-23"><a href="#实现方式-23" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Pop实现</span>
<span class="token keyword">type</span> <span class="token class-name">Pop<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">,</span> <span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">]</span>
      <span class="token operator">?</span> Rest
      <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><h3 id="promiseall返回类型"><a href="#promiseall返回类型" class="header-anchor">#</a> PromiseAll返回类型</h3> <h4 id="用法-25"><a href="#用法-25" class="header-anchor">#</a> 用法</h4> <p><code>PromiseAll</code>是用来取<code>Promise.all()</code>函数所有返回的类型，其用法如下</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：Promise&lt;[number, number, number]&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> <span class="token function">PromiseAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="实现方式-24"><a href="#实现方式-24" class="header-anchor">#</a> 实现方式</h4> <p>与之前的例子不同，<code>PromiseAll</code>我们声明的是一个<code>function</code>而不是<code>type</code>。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PromiseAllType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">PromiseAll</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> PromiseAllType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre></div><p>代码详解：</p> <ul><li>因为<code>Promise.all()</code>函数接受的是一个数组，因此泛型<code>T</code>限制为一个<code>any[]</code>类型的数组。</li> <li><code>PromiseAllType</code>的实现思路有点像之前的<code>PromiseType</code>，只不过这里多了一层<code>Promise</code>的包裹，因为<code>Promise.all()</code>的返回类型也是一个<code>Promise</code>。</li></ul> <h3 id="lookup-查找"><a href="#lookup-查找" class="header-anchor">#</a> LookUp(查找)</h3> <h4 id="用法-26"><a href="#用法-26" class="header-anchor">#</a> 用法</h4> <p><code>LookUp</code>是用来根据类型值查找类型的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'cat'</span>
  color<span class="token operator">:</span> <span class="token string">'black'</span> <span class="token operator">|</span> <span class="token string">'orange'</span> <span class="token operator">|</span> <span class="token string">'gray'</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'dog'</span>
  color<span class="token operator">:</span> <span class="token string">'white'</span>
  name<span class="token operator">:</span> <span class="token string">'wang'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：Dog</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> LookUp<span class="token operator">&lt;</span>Cat <span class="token operator">|</span> Dog<span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-25"><a href="#实现方式-25" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">LookUp<span class="token operator">&lt;</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>U extends { type: string; }</code>：这段代码限制<code>U</code>的类型必须是具有属性为<code>type</code>的对象。</li></ul> <h3 id="trim、trimleft以及trimright"><a href="#trim、trimleft以及trimright" class="header-anchor">#</a> Trim、TrimLeft以及TrimRight</h3> <h4 id="用法-27"><a href="#用法-27" class="header-anchor">#</a> 用法</h4> <p><code>Trim</code>、<code>TrimLeft</code>以及<code>TrimRight</code>这几个工具比较好理解，它们都是用来移除字符串中的空白符的。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> TrimLeft<span class="token operator">&lt;</span><span class="token string">' str'</span><span class="token operator">&gt;</span>  <span class="token comment">// 'str'</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> Trim<span class="token operator">&lt;</span><span class="token string">' str '</span><span class="token operator">&gt;</span>     <span class="token comment">// 'str'</span>
<span class="token keyword">type</span> <span class="token class-name">t3</span> <span class="token operator">=</span> TrimRight<span class="token operator">&lt;</span><span class="token string">'str '</span><span class="token operator">&gt;</span> <span class="token comment">// 'str'</span>
</code></pre></div><h4 id="实现方式-26"><a href="#实现方式-26" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Space</span> <span class="token operator">=</span> <span class="token string">' '</span> <span class="token operator">|</span> <span class="token string">'\n'</span> <span class="token operator">|</span> <span class="token string">'\t'</span>
<span class="token keyword">type</span> <span class="token class-name">TrimLeft<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimLeft<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">S</span>
<span class="token keyword">type</span> <span class="token class-name">Trim<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">|</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> Trim<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">S</span>
<span class="token keyword">type</span> <span class="token class-name">TrimRight<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimRight<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>TrimLeft</code>和<code>TrimRight</code>的实现思路是相同的，区别在于空白符的占位出现在左侧还是右侧。</li> <li><code>Trim</code>的实现就是把<code>TrimLeft</code>和<code>TrimRight</code>所做的事情结合起来。</li></ul> <h3 id="capitalize-首字母大写-和uncapatilize-首字母小写"><a href="#capitalize-首字母大写-和uncapatilize-首字母小写" class="header-anchor">#</a> Capitalize(首字母大写)和Uncapatilize(首字母小写)</h3> <h4 id="用法-28"><a href="#用法-28" class="header-anchor">#</a> 用法</h4> <p><code>Capitalize</code>是用来将一个字符串的首字母变成大写的，而<code>Uncapatilize</code>所做的事情跟它相反，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> Capitalize<span class="token operator">&lt;</span><span class="token string">'hello'</span><span class="token operator">&gt;</span>   <span class="token comment">// 'Hello'</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> Uncapatilize<span class="token operator">&lt;</span><span class="token string">'Hello'</span><span class="token operator">&gt;</span> <span class="token comment">// 'hello'</span>
</code></pre></div><h4 id="实现方式-27"><a href="#实现方式-27" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Capatilize<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> char<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uppercase<span class="token operator">&lt;</span>char<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token constant">S</span>
<span class="token keyword">type</span> <span class="token class-name">Uncapatilize<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> char<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Lowercase<span class="token operator">&lt;</span>char<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>代码详解：</p> <ul><li>无论是<code>Capatilize</code>还是<code>Uncapatilize</code>，它们都依赖内置的工具函数<code>Uppercase</code>或者<code>Lowercase</code>。对于<code>Capatilize</code>而言，我们只需要把首字母隔离出来，然后调用<code>Uppercase</code>即可。对于<code>Uncapatilize</code>而言，我们把首字母调用<code>Lowercase</code>即可。</li></ul> <h3 id="replace和replaceall"><a href="#replace和replaceall" class="header-anchor">#</a> Replace和ReplaceAll</h3> <h4 id="用法-29"><a href="#用法-29" class="header-anchor">#</a> 用法</h4> <p><code>Replace</code>是用来将字符串中第一次出现的某段内容，使用指定的字符串进行替换，而<code>和ReplaceAll</code>是全部替换，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'foofoobar'</span>
<span class="token keyword">type</span> <span class="token class-name">t</span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">'foobarbar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-28"><a href="#实现方式-28" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Replace<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  from <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  to <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">from</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> from <span class="token keyword">extends</span> <span class="token string">''</span>
        <span class="token operator">?</span> <span class="token constant">S</span>
        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><h3 id="replaceall"><a href="#replaceall" class="header-anchor">#</a> ReplaceAll</h3> <h4 id="用法-30"><a href="#用法-30" class="header-anchor">#</a> 用法</h4> <p><code>ReplaceAll</code>是用来将字符串中指定字符全部替换的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'foofoofoo'</span>
<span class="token keyword">type</span> <span class="token class-name">t</span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'foobarbar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> 
</code></pre></div><h4 id="实现方式-29"><a href="#实现方式-29" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ReplaceAll<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  from <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  to <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">from</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
              <span class="token operator">?</span> from <span class="token keyword">extends</span> <span class="token string">''</span>
                <span class="token operator">?</span> <span class="token constant">S</span>
                <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReplaceAll<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token punctuation">,</span> from<span class="token punctuation">,</span> to<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReplaceAll<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> from<span class="token punctuation">,</span> to<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
              <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><h3 id="appendargument-追加参数"><a href="#appendargument-追加参数" class="header-anchor">#</a> AppendArgument(追加参数)</h3> <h4 id="用法-31"><a href="#用法-31" class="header-anchor">#</a> 用法</h4> <p><code>AppendArgument</code>是用来向一个函数追加一个参数的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">//  结果：(a: number, b: number) =&gt; number</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> AppendArgument<span class="token operator">&lt;</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-30"><a href="#实现方式-30" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">AppendArgument<span class="token operator">&lt;</span>Fn<span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Fn <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">T</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li>我们首先利用<code>infer</code>关键词得到了<code>Fn</code>函数的参数类型以及返回类型，然后把新的参数添加到参数列表，并原样返回其函数类型。</li></ul> <h3 id="permutation-排列组合"><a href="#permutation-排列组合" class="header-anchor">#</a> Permutation(排列组合)</h3> <h4 id="用法-32"><a href="#用法-32" class="header-anchor">#</a> 用法</h4> <p><code>Permutation</code>是用来将联合类型中的每一个类型进行排列组合，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：['A', 'B'] | ['B', 'A']</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Permutation<span class="token operator">&lt;</span><span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-31"><a href="#实现方式-31" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Permutation<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span>
      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>Permutation<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>[T] extends [never]</code>：这段代码主要是为了处理联合类型为空的情况。</li> <li><code>T extends T</code>：这段代码主要是需要使用<strong>分布式条件类型</strong>这个知识点，当<code>T extends T</code>成立时，在其后的判断语句中，<code>T</code>代表当前迭代的类型。</li> <li><code>&lt;Exclude&lt;U, T&gt;</code>：因为此时的<code>T</code>代表当前迭代的类型，所以我们从原始联合类型中排除当前类型，然后递归调用<code>Permutation</code>。当<code>T</code>为<code>A</code>时，递归调用<code>Permutation&lt;'B' | 'C'&gt;</code>, 此时结果为<code>['A']</code> + <code>['B', 'C']</code> 或 <code>['A']</code> + <code>['C', 'B']</code>。</li></ul> <h3 id="lengthofstring-字符串的长度"><a href="#lengthofstring-字符串的长度" class="header-anchor">#</a> LengthOfString(字符串的长度)</h3> <h4 id="用法-33"><a href="#用法-33" class="header-anchor">#</a> 用法</h4> <p><code>LengthOfString</code>是用来计算一个字符串长度的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> LengthOfString<span class="token operator">&lt;</span><span class="token string">'Hello'</span><span class="token operator">&gt;</span> <span class="token comment">// 5</span>
</code></pre></div><h4 id="实现方式-32"><a href="#实现方式-32" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">LengthOfString<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Char<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> LengthOfString<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> Char<span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：</p> <ul><li>我们通过一个泛型的辅助数组来帮计算字符串的长度，在第一次符合条件时，将其第一个字符添加到数组中，在后续的递归过程中，如果不符合条件，直接返回<code>T['length']</code>，这个过程可以用如下代码表示：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一次递归</span>
<span class="token keyword">const</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'H'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'ello'</span>
<span class="token comment">// 第二次递归</span>
<span class="token keyword">const</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'H'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'ello'</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'llo'</span>
<span class="token comment">// 第三次递归</span>
<span class="token keyword">const</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'H'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'l'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'llo'</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'lo'</span>
<span class="token comment">// 第四次递归</span>
<span class="token keyword">const</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'H'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'l'</span><span class="token punctuation">,</span><span class="token string">'l'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'lo'</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'o'</span>
<span class="token comment">// 第五次递归</span>
<span class="token keyword">const</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'H'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'l'</span><span class="token punctuation">,</span><span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">''</span>
</code></pre></div><h3 id="flatten-数组降维"><a href="#flatten-数组降维" class="header-anchor">#</a> Flatten(数组降维)</h3> <h4 id="用法-34"><a href="#用法-34" class="header-anchor">#</a> 用法</h4> <p><code>Flatten</code>是用来将多维数组进行降维的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[1, 2, 3]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Flatten<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-33"><a href="#实现方式-33" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Flatten<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token constant">L</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>Flatten<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span>Flatten<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token operator">...</span>Flatten<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：<code>Flatten</code>数组降维的主要思路是，遍历数组中的每一个元素，判断其是否为一个数组，如果是，则递归调用<code>Flatten</code>，进行降维。</p> <h3 id="appendtoobject-对象添加新属性"><a href="#appendtoobject-对象添加新属性" class="header-anchor">#</a> AppendToObject(对象添加新属性)</h3> <h4 id="用法-35"><a href="#用法-35" class="header-anchor">#</a> 用法</h4> <p><code>AppendToObject</code>是用来向指定对象添加一个额外的属性(<code>key/value</code>)，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：{ id: number; name: string; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> AppendToObject<span class="token operator">&lt;</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-34"><a href="#实现方式-34" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">basicKeyType</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span>
<span class="token keyword">type</span> <span class="token class-name">AppendToObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> basicKeyType<span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token constant">V</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>basicKeyType</code>：在<code>JavaScript</code>中，因为一个对象的属性只能是<code>string</code>、<code>number</code>或者<code>symbol</code>这三种类型，所以我们限定<code>K</code>必须满足此条件。</li> <li><code>keyof T | K</code>：这里表示<code>keyof T</code>的联合类型和<code>K</code>，组合成一个新的联合类型。</li></ul> <h3 id="absolute-绝对值"><a href="#absolute-绝对值" class="header-anchor">#</a> Absolute(绝对值)</h3> <h4 id="用法-36"><a href="#用法-36" class="header-anchor">#</a> 用法</h4> <p><code>Absolute</code>是用来取一个数的绝对值的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：&quot;531&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Absolute<span class="token operator">&lt;</span><span class="token operator">-</span><span class="token number">531</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-35"><a href="#实现方式-35" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">NumberLike</span> <span class="token operator">=</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span>
<span class="token keyword">type</span> <span class="token class-name">Absolute<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> NumberLike<span class="token operator">&gt;</span></span> <span class="token operator">=</span>  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">N</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token constant">N</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>代码详解：</p> <ul><li><code>NumberLike</code>：我们认为<code>'1'</code>和<code>1</code>都是一个合法的数字，所以定义一个辅助的<code>NumberList</code>联合类型。</li> <li><code>${T}</code> extends <code>-${infer N}</code>：这里判断我们传递的数字是否为负数，如果是则直接取其正数部分，否则直接返回。</li></ul> <p><strong>注意</strong>：这里说到的取绝对值，最后的结果之所以是一个字符串类型，是因为<code>TS</code>对递归次数有限制。如果你想要真正的数字类型，可以考虑实现一个<code>MakeArray</code>辅助方法，使用此方法可以将字符串类型的数字，转换成一个真正的数字类型，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MakeArray<span class="token operator">&lt;</span><span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token constant">T</span>
  <span class="token operator">:</span> MakeArray<span class="token operator">&lt;</span><span class="token constant">N</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token comment">// 结果：3</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> MakeArray<span class="token operator">&lt;</span><span class="token string">'3'</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="stringtoarray-字符串转数组"><a href="#stringtoarray-字符串转数组" class="header-anchor">#</a> StringToArray(字符串转数组)</h3> <h4 id="用法-37"><a href="#用法-37" class="header-anchor">#</a> 用法</h4> <p><code>StringToArray</code>是用来将一个字符串转换成一个数组的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：['h', 'e', 'l', 'l', 'o']</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StringToArray<span class="token operator">&lt;</span><span class="token string">'hello'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-36"><a href="#实现方式-36" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">StringToArray<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Char<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> StringToArray<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">,</span> Char<span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token constant">U</span>
</code></pre></div><p>代码详解：<code>StringToArray</code>的实现主要是使用了递归的思想，它每次拿到字符串中一个字符，然后存入一个辅助数组中，当字符串为空时，直接返回这个辅助数组。</p> <h3 id="stringtounion-字符串转联合类型"><a href="#stringtounion-字符串转联合类型" class="header-anchor">#</a> StringToUnion(字符串转联合类型)</h3> <h4 id="用法-38"><a href="#用法-38" class="header-anchor">#</a> 用法</h4> <p>在实现<code>StringToArray</code>后，我们能够很容易实现<code>StringToUnion</code>，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'h' | 'e' | 'l' | 'l' | 'o'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StringToUnion<span class="token operator">&lt;</span><span class="token string">'hello'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-37"><a href="#实现方式-37" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// way1: 递归思想</span>
<span class="token keyword">type</span> <span class="token class-name">StringToUnion<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Char<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> Char <span class="token operator">|</span> StringToUnion<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token comment">// way2: 借用StringToArray</span>
<span class="token keyword">type</span> <span class="token class-name">StringToUnion<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> StringToArray<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：<code>StringToArray&lt;S&gt;</code>返回的是一个数组，<code>T[number]</code>表示对一个数组进行数字类型索引迭代，其迭代结果是每个元素组合成的一个联合类型。</p> <h3 id="merge-类型合并"><a href="#merge-类型合并" class="header-anchor">#</a> Merge(类型合并)</h3> <h4 id="用法-39"><a href="#用法-39" class="header-anchor">#</a> 用法</h4> <p><code>Merge</code>是用来合并两个类型，如果有重复的字段类型，则第二个的字段类型覆盖第一个的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  c<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ a: number; b: number; c: boolean; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Merge<span class="token operator">&lt;</span>Foo<span class="token punctuation">,</span> Bar<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-38"><a href="#实现方式-38" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Merge<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">F</span> <span class="token operator">|</span> <span class="token keyword">keyof</span> <span class="token constant">S</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">S</span> <span class="token operator">?</span> <span class="token constant">S</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">F</span> <span class="token operator">?</span> <span class="token constant">F</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>keyof F | keyof S</code>：这段代码的含义是将<code>F</code>和<code>S</code>这两个对象的键组合成一个新的联合类型。</li> <li><code>P extends</code>：这里进行了两次<code>extends</code>判断，其中第二次不能直接写成<code>F[P]</code>，而应该多判断一次，当满足条件时才使用<code>F[P]</code>，这是因为<code>P</code>的类型判断无法作用于<code>:</code>符号后面。</li></ul> <h3 id="camelcase-连字符字符串转小驼峰"><a href="#camelcase-连字符字符串转小驼峰" class="header-anchor">#</a> CamelCase(连字符字符串转小驼峰)</h3> <h4 id="用法-40"><a href="#用法-40" class="header-anchor">#</a> 用法</h4> <p><code>CamelCase</code>是用来将连字符字符串转驼峰的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：fooBarBaz</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> CamelCase<span class="token operator">&lt;</span><span class="token string">'foo-bar-baz'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-39"><a href="#实现方式-39" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CamelCase<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> <span class="token constant">S2</span> <span class="token keyword">extends</span> <span class="token class-name">Capitalize<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;</span></span>
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CamelCase<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> 
        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CamelCase<span class="token operator">&lt;</span>Capitalize<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>代码详解：<code>CamelCase</code>的实现，使用到了递归的思路，以上面例子为例：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> CamelCase<span class="token operator">&lt;</span><span class="token string">'foo-bar-baz'</span><span class="token operator">&gt;</span>

<span class="token comment">// 第一次递归调用 S满足${infer S1}-${infer S2} S2不满足extends Capitalize&lt;S2&gt;</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'foo-bar-baz'</span> <span class="token constant">S1</span> <span class="token operator">=</span> <span class="token string">'foo'</span> <span class="token constant">S2</span> <span class="token operator">=</span> <span class="token string">'bar-baz'</span>

<span class="token comment">// 第二次递归调用 S满足${infer S1}-${infer S2} S2不满足extends Capitalize&lt;S2&gt;</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'Bar-baz'</span> <span class="token constant">S1</span> <span class="token operator">=</span> <span class="token string">'Bar'</span> <span class="token constant">S2</span> <span class="token operator">=</span> <span class="token string">'baz'</span>

<span class="token comment">// 第三次递归调用 S不满足${infer S1}-${infer S2}</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'Baz'</span>

<span class="token comment">// 结果：fooBarBaz</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token string">'foo'</span> <span class="token operator">+</span> <span class="token string">'Bar'</span> <span class="token operator">+</span> <span class="token string">'Baz'</span> <span class="token operator">=&gt;</span> <span class="token string">'fooBarBaz'</span>
</code></pre></div><h3 id="kebabcase-字符串转连字符"><a href="#kebabcase-字符串转连字符" class="header-anchor">#</a> KebabCase(字符串转连字符)</h3> <h4 id="用法-41"><a href="#用法-41" class="header-anchor">#</a> 用法</h4> <p>在实现<code>CamelCase</code>后，我们很容易能够实现<code>KebabCase</code>，它是用来将驼峰形式字符串，转成连字符形式字符串的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：foo-bar-baz</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> KebabCase<span class="token operator">&lt;</span><span class="token string">'FooBarBaz'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-40"><a href="#实现方式-40" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">KebabCase<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> <span class="token constant">S2</span> <span class="token keyword">extends</span> <span class="token class-name">Uncapitalize<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;</span></span>
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uncapitalize<span class="token operator">&lt;</span><span class="token constant">S1</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>KebabCase<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uncapitalize<span class="token operator">&lt;</span><span class="token constant">S1</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>KebabCase<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><h3 id="diff-类型差异部分"><a href="#diff-类型差异部分" class="header-anchor">#</a> Diff(类型差异部分)</h3> <h4 id="用法-42"><a href="#用法-42" class="header-anchor">#</a> 用法</h4> <p><code>Diff</code>是用来获取两个类型的不同部分的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  gender<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ id: number; gender: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Diff<span class="token operator">&lt;</span>Foo<span class="token punctuation">,</span> Bar<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-41"><a href="#实现方式-41" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">DiffKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">keyof</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token keyword">keyof</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">|</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">Diff<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>k <span class="token keyword">in</span> DiffKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> k <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">:</span> k <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">U</span> <span class="token operator">?</span> <span class="token constant">U</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>keyof Foo | keyof Bar</code>：这段代码是把<code>T</code>和<code>U</code>中的所有属性组合成一个新的联合类型。</li> <li><code>keyof (T | U)</code>：这段代码是取<code>T</code>和<code>U</code>的公共属性。</li> <li><code>Exclude&lt;K1, K2&gt;</code>：这段代码主要是用来从<code>K1</code>中排除<code>K2</code>，带入以上例子也就是排除掉所有公共属性。</li> <li><code>Diff&lt;T, U&gt;</code>：在获取到<code>DiffKeys</code>后，就可以迭代的方式获取到每个属性<code>key</code>，它所对应的类型了。</li></ul> <h3 id="anyof-数组元素真值判断"><a href="#anyof-数组元素真值判断" class="header-anchor">#</a> AnyOf(数组元素真值判断)</h3> <h4 id="用法-43"><a href="#用法-43" class="header-anchor">#</a> 用法</h4> <p><code>AnyOf</code>用来判断数组元素，如果任意值为真，返回true；数组为空或者全部为false，才返回false，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'name'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：false</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-42"><a href="#实现方式-42" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">FalseType</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token boolean">false</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">AnyOf<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">FalseType</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre></div><p>代码详解：因为我们就是要区分<code>true/false</code>，所以我们把所有为<code>false</code>的值全部列举出来，然后使用<code>T[number]</code>索引迭代，依次去跟<code>FalseType</code>比较。</p> <h3 id="isnever-是否是never类型"><a href="#isnever-是否是never类型" class="header-anchor">#</a> IsNever(是否是Never类型)</h3> <h4 id="用法-44"><a href="#用法-44" class="header-anchor">#</a> 用法</h4> <p><code>IsNever</code>是用来判断是否为<code>never</code>类型，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：false</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-43"><a href="#实现方式-43" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsNever<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="isunion-是否联合类型"><a href="#isunion-是否联合类型" class="header-anchor">#</a> IsUnion(是否联合类型)</h3> <h4 id="用法-45"><a href="#用法-45" class="header-anchor">#</a> 用法</h4> <p><code>IsUnion</code>是用来判断一个类型是否为联合类型的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：false</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-44"><a href="#实现方式-44" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsUnion<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span>
  <span class="token operator">?</span> <span class="token punctuation">[</span>Exclude<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token boolean">false</span>
    <span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：上面的实现虽然代码不多，但可能无法一下子就弄明白，为了更好的理解这种实现方式，我们来看如下两个案例分析：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 案例一</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
step1<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">|</span> <span class="token builtin">number</span>
step2<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span>
step3<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span>
step4<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">true</span>
result<span class="token operator">:</span> <span class="token boolean">true</span>

<span class="token comment">// 案例二</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token builtin">string</span>
step1<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span>
step2<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span>
result<span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><p>根据之前我们学到的<strong>分布式条件类型</strong>知识，<code>T extends T</code>的时候，会把<code>T</code>进行子类型分发。</p> <p>如案例一的<code>step3</code>、<code>step4</code>，在分发后会把每次迭代的结果联合起来，组合成最终的结果。</p> <h3 id="replacekeys-类型替换"><a href="#replacekeys-类型替换" class="header-anchor">#</a> ReplaceKeys(类型替换)</h3> <h4 id="用法-46"><a href="#用法-46" class="header-anchor">#</a> 用法</h4> <p><code>ReplaceKeys</code>是用来在一个类型中，使用指定的Y类型来替换已经存在的T类型的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：{ id: number; name: boolean; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> ReplaceKeys<span class="token operator">&lt;</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-45"><a href="#实现方式-45" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ReplaceKeys<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">Y</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">:</span>
    <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span>
      <span class="token operator">?</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">Y</span>
        <span class="token operator">?</span> <span class="token constant">Y</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token builtin">never</span>
      <span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="removeindexsignature-移除索引签名"><a href="#removeindexsignature-移除索引签名" class="header-anchor">#</a> RemoveIndexSignature(移除索引签名)</h3> <h4 id="用法-47"><a href="#用法-47" class="header-anchor">#</a> 用法</h4> <p><code>RemoveIndexSignature</code>是用来移除一个类型中的索引签名的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ foo(): void; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> RemoveIndexSignature<span class="token operator">&lt;</span>Foo<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-46"><a href="#实现方式-46" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">NeverIndex<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">P</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">P</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">P</span>
<span class="token keyword">type</span> <span class="token class-name">RemoveIndexSignature<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> NeverIndex<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>NeverIndex</code>：因为索引签名有一个特点，为<code>string</code>或者<code>number</code>类型，所以我们通过<code>string extends P</code>或者<code>number extends P</code>的形式排除此索引签名。</li> <li><code>as NeverIndex&lt;P</code>：在之前的案例中，我们介绍过<code>as</code>的用法，在这里有<strong>加工</strong>或<strong>再次断言</strong>的意思。在使用<code>in</code>操作符进行迭代时，对每一个<code>P</code>再使用<code>NeverIndex</code>加工一下，如果是索引签名，这里的结果为<code>never</code>，为<code>never</code>时表示跳过当前迭代，进而达到排除索引签名的目的。</li></ul> <h3 id="percentageparser-百分比解析"><a href="#percentageparser-百分比解析" class="header-anchor">#</a> PercentageParser(百分比解析)</h3> <h4 id="用法-48"><a href="#用法-48" class="header-anchor">#</a> 用法</h4> <p><code>PercentageParser</code>是用来解析百分比字符串的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> PercentageParser<span class="token operator">&lt;</span><span class="token string">'+85%'</span><span class="token operator">&gt;</span> <span class="token comment">// ['+', '85', '%']</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> PercentageParser<span class="token operator">&lt;</span><span class="token string">'-85%'</span><span class="token operator">&gt;</span> <span class="token comment">// ['-', '85', '%']</span>
<span class="token keyword">type</span> <span class="token class-name">result3</span> <span class="token operator">=</span> PercentageParser<span class="token operator">&lt;</span><span class="token string">'85'</span><span class="token operator">&gt;</span>   <span class="token comment">// ['', '85', '']</span>
</code></pre></div><h4 id="实现方式-47"><a href="#实现方式-47" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CheckPrefix<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token string">'+'</span> <span class="token operator">|</span> <span class="token string">'-'</span> <span class="token operator">?</span> <span class="token constant">S</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">CheckSuffix<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token string">'%'</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">PercentageParser<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CheckPrefix<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token operator">...</span>CheckSuffix<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token operator">...</span>CheckSuffix<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>CheckPrefix</code>是用来处理百分比字符串前面的符号的，如果存在<code>+</code>或者<code>-</code>，则原样返回，如果不存在则返回<code>never</code>，表示没有符号。</li> <li><code>CheckSuffix</code>是用来处理百分比字符串后面的百分比符号的，如果存在，则返回一个数组(最后一项固定为百分比符号)；如果不存在，则返回的数组最后一个元素固定为空字符串。</li></ul> <h3 id="dropchar-移除字符"><a href="#dropchar-移除字符" class="header-anchor">#</a> DropChar(移除字符)</h3> <h4 id="用法-49"><a href="#用法-49" class="header-anchor">#</a> 用法</h4> <p><code>DropChar</code>是用来在字符串中移除指定字符的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：butterfly!</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> DropChar<span class="token operator">&lt;</span><span class="token string">' b u t t e r f l y ! '</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-48"><a href="#实现方式-48" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">DropChar<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token string">''</span>
  <span class="token operator">?</span> <span class="token constant">S</span>
  <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">C</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> DropChar<span class="token operator">&lt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>代码详解：<code>DropChar</code>和<code>ReplaceAll</code>的实现思路非常相似，首先需要判断待移除的字符是不是空字符串，如果是，则直接返回原始字符串；如果不是，先判断字符串中是否包含待移除的字符，包含则递归调用；不包含则直接返回原始字符串。</p> <h3 id="minusone-减一"><a href="#minusone-减一" class="header-anchor">#</a> MinusOne(减一)</h3> <p><code>MinusOne</code>是用来实现数字减一的，其用法如下：</p> <h4 id="用法-50"><a href="#用法-50" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：99</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> MinusOne<span class="token operator">&lt;</span><span class="token number">100</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-49"><a href="#实现方式-49" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MinusOne<span class="token operator">&lt;</span>
  <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
  <span class="token operator">?</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
    <span class="token operator">?</span> Rest<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>
  <span class="token operator">:</span> MinusOne<span class="token operator">&lt;</span><span class="token constant">N</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>代码详解：在实现<code>MinusOne</code>的时候，借用了一个空数组，首先判断数组的长度是否等于传递的数字<code>N</code>，如果相等则从数组中随意移除一位，然后返回剩下数组的长度即可；如果不相等，则往数组中添加一个元素，再递归调用<code>MinusOne</code>。</p> <p><strong>注意</strong>：由于<code>TS</code>在递归调用时存在最大递归调用次数，所以对于比较大的数字会提示错误。</p> <h3 id="pickbytype-根据类型选取"><a href="#pickbytype-根据类型选取" class="header-anchor">#</a> PickByType(根据类型选取)</h3> <h4 id="用法-51"><a href="#用法-51" class="header-anchor">#</a> 用法</h4> <p><code>PickByType</code>是用来根据类型选取属性的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span>
  isReadonly<span class="token operator">:</span> <span class="token builtin">boolean</span>
  isEnable<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果：{ isReadonly: boolean, isEnable: boolean }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> PickByType<span class="token operator">&lt;</span>Model<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-50"><a href="#实现方式-50" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PickByType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">P</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：<code>PickByType</code>的实现，可以使用<code>as</code>进行第二次断言，当类型满足时就返回当前迭代的<code>P</code>，不满足类型时就返回<code>never</code>，因为<code>never</code>最后会被排除，所以最后的迭代结果只有满足类型的键。</p> <h3 id="startswith-字符串startswith方法"><a href="#startswith-字符串startswith方法" class="header-anchor">#</a> StartsWith(字符串startsWith方法)</h3> <h4 id="用法-52"><a href="#用法-52" class="header-anchor">#</a> 用法</h4> <p><code>StartsWith</code>是用来实现<code>JavaScript</code>中字符串的<code>startsWith</code>功能，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-51"><a href="#实现方式-51" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">StartsWith<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">C</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="endswith-字符串endswith方法"><a href="#endswith-字符串endswith方法" class="header-anchor">#</a> EndsWith(字符串endsWith方法)</h3> <h4 id="用法-53"><a href="#用法-53" class="header-anchor">#</a> 用法</h4> <p><code>EndsWith</code>是用来实现<code>JavaScript</code>中字符串的<code>endsWith</code>功能，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> endsWith<span class="token operator">&lt;</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'bc'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-52"><a href="#实现方式-52" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">EndsWith<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">C</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="partialbykeys-按需可选"><a href="#partialbykeys-按需可选" class="header-anchor">#</a> PartialByKeys(按需可选)</h3> <h4 id="用法-54"><a href="#用法-54" class="header-anchor">#</a> 用法</h4> <p><code>PartialByKeys</code>是用来实现按需可选的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  address<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">UserPartialName</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  address<span class="token operator">:</span> <span class="token builtin">string</span> 
<span class="token punctuation">}</span>

<span class="token comment">// 结果：UserPartialName</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> PartialByKeys<span class="token operator">&lt;</span>User<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-53"><a href="#实现方式-53" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CopyKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">PartialByKeys<span class="token operator">&lt;</span>
  <span class="token constant">T</span><span class="token punctuation">,</span>
  <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> CopyKeys<span class="token operator">&lt;</span>Partial<span class="token operator">&lt;</span>Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Extract<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;&gt;</span> <span class="token operator">&amp;</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>Pick</code>部分：首先取<code>keyof T</code>和<code>K</code>的交集，然后使用<code>Pick</code>从<code>T</code>中选取交集的<code>key</code>组成一个新类型，最后给新类型添加可选。</li> <li><code>Omit</code>部分：根据之前介绍的<code>Omit</code>的知识，<code>Omit&lt;T, K&gt;</code>表示从<code>T</code>中剔除含有<code>K</code>的类型。</li> <li><code>CopyKeys</code>部分：如果不使用<code>CopyKeys</code>，最后的结果为<code>T &amp; U</code>形式，它实际上与使用<code>CopyKeys</code>的结果是一样的。这里使用<code>CopyKeys</code>，很大程度上是为了测试。</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 使用CopyKeys，结果为true；不使用，结果为false</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> Equal<span class="token operator">&lt;</span>PartialByKeys<span class="token operator">&lt;</span>User<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> UserPartialName<span class="token operator">&gt;</span>
</code></pre></div><h3 id="requiredbykeys-按需必填"><a href="#requiredbykeys-按需必填" class="header-anchor">#</a> RequiredByKeys(按需必填)</h3> <p>在实现<code>PartialByKeys</code>后，很容易按照相同的思路去实现<code>RequiredByKeys</code>。</p> <h4 id="用法-55"><a href="#用法-55" class="header-anchor">#</a> 用法</h4> <p><code>RequiredByKeys</code>是用来实现按需必填的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">UserRequiredName</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> 
<span class="token punctuation">}</span>

<span class="token comment">// 结果：UserRequiredName</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> RequiredByKeys<span class="token operator">&lt;</span>User<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-54"><a href="#实现方式-54" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CopyKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">RequiredByKeys<span class="token operator">&lt;</span>
  <span class="token constant">T</span><span class="token punctuation">,</span>
  <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> CopyKeys<span class="token operator">&lt;</span>Required<span class="token operator">&lt;</span>Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Extract<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;&gt;</span> <span class="token operator">&amp;</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><p>代码详解：实现思路参考<code>PartialByKeys</code>。</p> <h3 id="mutable-可改"><a href="#mutable-可改" class="header-anchor">#</a> Mutable(可改)</h3> <h4 id="用法-56"><a href="#用法-56" class="header-anchor">#</a> 用法</h4> <p><code>Mutable</code>是用来让所有属性变为可改的(移除<code>readonly</code>关键词)，其用法为：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果：{ name: string; age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">MutableResult</span> <span class="token operator">=</span> MyMutable<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-55"><a href="#实现方式-55" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyMutable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码解读：</p> <ul><li><code>-readonly</code>：表示把<code>readonly</code>关键词去掉，去掉之后此字段变为可改的。</li></ul> <h3 id="omitbytype-按类型移除"><a href="#omitbytype-按类型移除" class="header-anchor">#</a> OmitByType(按类型移除)</h3> <p><code>OmitByType</code>的实现思路和<code>PickByType</code>类似。</p> <h4 id="用法-57"><a href="#用法-57" class="header-anchor">#</a> 用法</h4> <p><code>OmitByType</code>是用来按照类型移除的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span>
  isReadonly<span class="token operator">:</span> <span class="token builtin">boolean</span>
  isEnable<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">ModelOmitBoolean</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：ModelOmitBoolean</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> OmitByType<span class="token operator">&lt;</span>Model<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-56"><a href="#实现方式-56" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">OmitByType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码解析：实现思路参考<code>PickByType</code>。</p> <h3 id="objectentries"><a href="#objectentries" class="header-anchor">#</a> ObjectEntries</h3> <h4 id="用法-58"><a href="#用法-58" class="header-anchor">#</a> 用法</h4> <p><code>ObjectEntries</code>是用来实现<code>JavaScript</code>中的<code>Object.entries()</code>方法，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  locations<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">ModelEntries</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token string">'locations'</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 结果：ModelEntries</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> ObjectEntries<span class="token operator">&lt;</span>Model<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-57"><a href="#实现方式-57" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ObjectEntries<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">U</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：借助<code>U</code>类型，然后对其<code>Required</code>是为了去掉可选类型，<code>U[keyof U]</code>表示取出<code>U</code>中键的类型组成的联合类型。</p> <h3 id="tupletonestedobject-元组转嵌套对象"><a href="#tupletonestedobject-元组转嵌套对象" class="header-anchor">#</a> TupleToNestedObject(元组转嵌套对象)</h3> <h4 id="用法-59"><a href="#用法-59" class="header-anchor">#</a> 用法</h4> <p><code>TupleToNestedObject</code>是用来将元组转成嵌套对象的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：{ a: { b: string; } }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> TupleToNestedObject<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-58"><a href="#实现方式-58" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">TupleToNestedObject<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span>
      <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">F</span><span class="token punctuation">]</span><span class="token operator">:</span> TupleToNestedObject<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>
    <span class="token operator">:</span> <span class="token constant">U</span>
</code></pre></div><h3 id="reverse"><a href="#reverse" class="header-anchor">#</a> Reverse</h3> <h4 id="用法-60"><a href="#用法-60" class="header-anchor">#</a> 用法</h4> <p><code>Reverse</code>是用来实现数组的<code>reverse()</code>方法的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：['b', 'a']</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Reverse<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-59"><a href="#实现方式-59" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Reverse<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token operator">...</span>Reverse<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="fliparguments-反转函数参数"><a href="#fliparguments-反转函数参数" class="header-anchor">#</a> FlipArguments(反转函数参数)</h3> <p>借助上面的<code>Reverse</code>方法，可以很容易实现函数参数的反转。</p> <h4 id="用法-61"><a href="#用法-61" class="header-anchor">#</a> 用法</h4> <p><code>FlipArguments</code>是用来实现函数参数反转的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：(a: number, b: string) =&gt; string | number</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> FlipArguments<span class="token operator">&lt;</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-60"><a href="#实现方式-60" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">FlipArguments<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span>
    <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> Reverse<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">R</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><h3 id="flattendepth-数组按深度降维"><a href="#flattendepth-数组按深度降维" class="header-anchor">#</a> FlattenDepth(数组按深度降维)</h3> <h4 id="用法-62"><a href="#用法-62" class="header-anchor">#</a> 用法</h4> <p><code>FlattenDepth</code>是用来按深度进行数组降维的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> FlattenDepth<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-61"><a href="#实现方式-61" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">FlattenDepth<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">D</span> <span class="token keyword">extends</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span>
  <span class="token operator">?</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">D</span></span>
    <span class="token operator">?</span> <span class="token constant">T</span>
    <span class="token operator">:</span> <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>FlattenDepth<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span>FlattenDepth<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">F</span><span class="token punctuation">,</span> <span class="token operator">...</span>FlattenDepth<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><p>代码详解：<code>FlattenDepth</code>的实现思路和<code>Flatten</code>基本一直，区别是按深度降维时需要一个数组去记录降维的次数。</p> <h3 id="bem"><a href="#bem" class="header-anchor">#</a> BEM</h3> <h4 id="用法-63"><a href="#用法-63" class="header-anchor">#</a> 用法</h4> <p><code>BEM</code>是用来将字符串连接成CSS BEM格式的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'btn--price__small' | 'btn--price__mini' </span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token constant">BEM</span><span class="token operator">&lt;</span><span class="token string">'btn'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'small'</span><span class="token punctuation">,</span> <span class="token string">'mini'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-62"><a href="#实现方式-62" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ArrayToString<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">P</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">BEM</span><span class="token operator">&lt;</span>
  <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">E</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">M</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">B</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ArrayToString<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token punctuation">,</span> <span class="token string">'__'</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ArrayToString<span class="token operator">&lt;</span><span class="token constant">M</span><span class="token punctuation">,</span> <span class="token string">'--'</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>代码详解：实现<code>BEM</code>的思路并不复杂，只需要记住如下两个知识点：</p> <ul><li>判断是一个空数组，可以使用<code>T extends []</code>或者<code>T['length'] extends 0</code>。</li> <li><code>T[number]</code>会自动迭代数组，例如：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果: 'A_B' | 'A_C' | 'A_D'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">A__</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><h3 id="inordertraversal-中序遍历"><a href="#inordertraversal-中序遍历" class="header-anchor">#</a> InOrderTraversal(中序遍历)</h3> <p><strong>先序遍历</strong>：先访问根节点，然后访问左节点，最后访问右节点。
<strong>中序遍历</strong>：先访问左节点，然后访问根节点，最后访问右节点。
<strong>后序遍历</strong>：先访问左节点，然后访问右节点，最后访问根节点。</p> <h4 id="用法-64"><a href="#用法-64" class="header-anchor">#</a> 用法</h4> <p><code>InOrderTraversal</code>是用来实现二叉树中序遍历的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token punctuation">{</span>
  val<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  left<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  right<span class="token operator">:</span> <span class="token punctuation">{</span>
    val<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    left<span class="token operator">:</span> <span class="token punctuation">{</span>
      val<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      left<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      right<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    right<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果: [1, 3, 2]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> InOrderTraversal<span class="token operator">&lt;</span><span class="token keyword">typeof</span> tree<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-63"><a href="#实现方式-63" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 一个二叉树节点</span>
<span class="token keyword">interface</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">{</span>
  val<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  left<span class="token operator">:</span> TreeNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  right<span class="token operator">:</span> TreeNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// way1:</span>
<span class="token keyword">type</span> <span class="token class-name">InOrderTraversal<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> TreeNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> TreeNode <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">TreeNode</span>
  <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>InOrderTraversal<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'left'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'val'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>InOrderTraversal<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'right'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
  <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">// way2:</span>
<span class="token keyword">type</span> <span class="token class-name">InOrderTraversal<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> TreeNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">TreeNode</span>
    <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'left'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">TreeNode</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>InOrderTraversal<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'left'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'val'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>InOrderTraversal<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'right'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'right'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">TreeNode</span>
        <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'val'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>InOrderTraversal<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'right'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'val'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p><strong>注意</strong>：如果以上代码在编辑器中提示<strong>类型实例化过深，且可能无限</strong>这是正常现象，因为<code>TypeScript</code>对于递归的次数是有限制的。</p> <h3 id="flipobject-对象键值交换"><a href="#flipobject-对象键值交换" class="header-anchor">#</a> FlipObject(对象键值交换)</h3> <h4 id="用法-65"><a href="#用法-65" class="header-anchor">#</a> 用法</h4> <p><code>FlipObject</code>是用来将对象的键值交换的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：{ pi: 'a' }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> FlipObject<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'pi'</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-64"><a href="#实现方式-64" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">BasicType</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span>
<span class="token keyword">type</span> <span class="token class-name">FlipObject<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> BasicType<span class="token operator">&gt;&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">P</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="fibonacci-斐波那契数列"><a href="#fibonacci-斐波那契数列" class="header-anchor">#</a> Fibonacci(斐波那契数列)</h3> <p><strong>菲波那切数列</strong>：1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144...</p> <h4 id="用法-66"><a href="#用法-66" class="header-anchor">#</a> 用法</h4> <p><code>Fibonacci</code>是用来实现菲波那切数列的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Fibonacci<span class="token operator">&lt;</span><span class="token number">5</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-65"><a href="#实现方式-65" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Fibonacci<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  Index <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Prev <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Current <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Index<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span>
  <span class="token operator">?</span> Current<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
  <span class="token operator">:</span> Fibonacci<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Current<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Prev<span class="token punctuation">,</span> <span class="token operator">...</span>Current<span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="allcombinations-全排列"><a href="#allcombinations-全排列" class="header-anchor">#</a> AllCombinations(全排列)</h3> <h4 id="用法-67"><a href="#用法-67" class="header-anchor">#</a> 用法</h4> <p><code>ALlCombitation</code>是用来列举全部排列组合可能性的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'' | 'A' | 'AB' | 'B' | 'BA'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> AllCombination<span class="token operator">&lt;</span><span class="token string">'AB'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-66"><a href="#实现方式-66" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">StringToUnion<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token constant">F</span> <span class="token operator">|</span> StringToUnion<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">Combination<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token constant">K</span> <span class="token operator">=</span> <span class="token constant">S</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span>
  <span class="token operator">?</span> <span class="token constant">U</span>
  <span class="token operator">:</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">S</span></span>
    <span class="token operator">?</span> Combination<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">|</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">K</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">U</span>
<span class="token keyword">type</span> <span class="token class-name">AllCombination<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Combination<span class="token operator">&lt;</span>StringToUnion<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>StringToUnion</code>是用来将字符串变成一个联合类型的，例如：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果： 'A' | 'B'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StringToUnion<span class="token operator">&lt;</span><span class="token string">'AB'</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>Combination</code>是用来将联合类型进行排列组合的，以以上<code>'A' | 'B'</code>这个联合类型为例，步骤如下：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一步：从'A' | 'B这个联合类型中排除当前迭代的字符'A'</span>
<span class="token constant">K</span> <span class="token operator">=</span> <span class="token string">'A'</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span>  <span class="token operator">=&gt;</span> Exclude<span class="token operator">&lt;</span><span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token operator">&gt;</span>
<span class="token comment">// 第一步子递归：</span>
Combination<span class="token operator">&lt;</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'A'</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'A'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">B</span><span class="token template-punctuation string">`</span></span> <span class="token operator">=&gt;</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span> <span class="token operator">|</span> <span class="token string">'AB'</span>

<span class="token comment">// 第二步：从'A' | 'B'这个联合类型中排除当前迭代的字符'B'</span>
<span class="token constant">K</span> <span class="token operator">=</span> <span class="token string">'B'</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span> <span class="token operator">=&gt;</span> Exclude<span class="token operator">&lt;</span><span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token operator">&gt;</span>
<span class="token comment">// 第二步子递归：</span>
Combination<span class="token operator">&lt;</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'B'</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'B'</span> <span class="token operator">|</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'B'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">A</span><span class="token template-punctuation string">`</span></span> <span class="token operator">=&gt;</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'B'</span> <span class="token operator">|</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'BA'</span>

<span class="token comment">// 结果：剔除相同元素</span>
result <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'AB'</span> <span class="token operator">|</span> <span class="token string">'B'</span> <span class="token operator">|</span> <span class="token string">'BA'</span> 
</code></pre></div><h3 id="greaterthan-大于"><a href="#greaterthan-大于" class="header-anchor">#</a> GreaterThan(大于)</h3> <h4 id="用法-68"><a href="#用法-68" class="header-anchor">#</a> 用法</h4> <p><code>GreaterThan&lt;T, N&gt;</code>是来用判断正整数T是否大于正整数N的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> GreaterThan<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-67"><a href="#实现方式-67" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">GreaterThan<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> Number<span class="token punctuation">,</span>
  <span class="token constant">N</span> <span class="token keyword">extends</span> Number<span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">R</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token boolean">false</span>
    <span class="token operator">:</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">R</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token boolean">true</span>
      <span class="token operator">:</span> GreaterThan<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">N</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>代码详解：使用一个空数组来辅助，每次递归添加一个元素，如果正整数<code>T</code>先等于这个数组的长度，则为<code>false</code>；如果正整数<code>N</code>先等于这个数组的长度，则为<code>true</code>。</p> <h3 id="zip-按位置匹配"><a href="#zip-按位置匹配" class="header-anchor">#</a> Zip(按位置匹配)</h3> <h4 id="用法-69"><a href="#用法-69" class="header-anchor">#</a> 用法</h4> <p><code>Zip</code>是用来将两个元组按照相同索引位置组合成一个新数组的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[[1, true], [2, false]]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Zip<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-68"><a href="#实现方式-68" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Zip<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> Head<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Tail<span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>First<span class="token punctuation">,</span> Head<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>Zip<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> Tail<span class="token operator">&gt;</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="istuple-是否为元组"><a href="#istuple-是否为元组" class="header-anchor">#</a> IsTuple(是否为元组)</h3> <h4 id="用法-70"><a href="#用法-70" class="header-anchor">#</a> 用法</h4> <p><code>IsTuple</code>是用来判断是否为一个元组的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> IsTuple<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-69"><a href="#实现方式-69" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsTuple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token boolean">false</span>
    <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">readonly</span></span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
        <span class="token operator">?</span> <span class="token boolean">false</span>
        <span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><p>代码解析：以上代码中，比较关键的代码是<code>number extends T['length']</code>，这里不能写成<code>T['length'] extends number</code>，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一种方式</span>
<span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
<span class="token operator">=&gt;</span> <span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token number">1</span>
<span class="token operator">=&gt;</span> <span class="token boolean">false</span>

<span class="token comment">// 第二种方式</span>
<span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span>
<span class="token operator">=&gt;</span> <span class="token number">1</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span>
<span class="token operator">=&gt;</span> <span class="token boolean">true</span>
</code></pre></div><h3 id="chunk-lodash分割数组"><a href="#chunk-lodash分割数组" class="header-anchor">#</a> Chunk(lodash分割数组)</h3> <p><a href="https://www.lodashjs.com/docs/lodash.chunk" target="_blank" rel="noopener noreferrer">Lodash Chunk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: 将一个数组分割成长度为N的多个小数组。</p> <h4 id="用法-71"><a href="#用法-71" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[[1, 2], [3, 4]]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Chunk<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-70"><a href="#实现方式-70" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Chunk<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Size <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">R</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Size</span>
  <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token operator">...</span>Chunk<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Size<span class="token operator">&gt;</span><span class="token punctuation">]</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> Chunk<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token punctuation">,</span> Size<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">R</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token number">0</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">R</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：实现<code>Chunk</code>大体思路是：借助一个辅助空数组，在遍历数组时往这个辅助数组中添加元素，一直到等于指定长度，然后进行下一次相同操作。</p> <h3 id="fill-数组fill方法"><a href="#fill-数组fill方法" class="header-anchor">#</a> Fill(数组fill方法)</h3> <p>实现<code>Fill</code>时，不考虑索引，全部替换。</p> <h4 id="用法-72"><a href="#用法-72" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 解雇：[true, true, true]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Fill<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-71"><a href="#实现方式-71" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Fill<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">U</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token operator">...</span>Fill<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="without-移除"><a href="#without-移除" class="header-anchor">#</a> Without(移除)</h3> <p><code>Without&lt;T, F&gt;</code>，其中<code>T</code>需要是数组形式，<code>F</code>可以是一个数字或者一个数组。</p> <h4 id="用法-73"><a href="#用法-73" class="header-anchor">#</a> 用法</h4> <p><code>Without</code>是用来从数组中移除指定元素的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Without<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-72"><a href="#实现方式-72" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ToUnion<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token constant">T</span>
<span class="token keyword">type</span> <span class="token class-name">Without<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">F</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token operator">=</span> ToUnion<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
    <span class="token operator">?</span> First <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span>
      <span class="token operator">?</span> Without<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> Without<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> First<span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">R</span>
</code></pre></div><p>代码详解：因为<code>F</code>支持单数字和数组，所以定义一个<code>ToUion</code>来统一处理成联合类型。随后直接遍历数组，如果当前迭代的元素在联合类型中，则直接跳过进行下一次迭代；否则，把当前迭代元素添加到<code>R</code>辅助数组中。</p> <h3 id="trunc-数学trunc取整"><a href="#trunc-数学trunc取整" class="header-anchor">#</a> Trunc(数学trunc取整)</h3> <h4 id="用法-74"><a href="#用法-74" class="header-anchor">#</a> 用法</h4> <p><code>Trunc</code>是用来实现<code>Math.trunc()</code>方法的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：100</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Trunc<span class="token operator">&lt;</span><span class="token number">100.32</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-73"><a href="#实现方式-73" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Trunc<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token constant">L</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><h3 id="indexof-数组indexof方法"><a href="#indexof-数组indexof方法" class="header-anchor">#</a> IndexOf(数组indexOf方法)</h3> <h4 id="用法-75"><a href="#用法-75" class="header-anchor">#</a> 用法</h4> <p><code>IndexOf</code>是用来实现数组<code>indexOf</code>方法的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：2</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> IndexOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-74"><a href="#实现方式-74" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IndexOf<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">U</span><span class="token punctuation">,</span>
  Index <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
    <span class="token operator">?</span> First <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span>
      <span class="token operator">?</span> Index<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> IndexOf<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Index<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div><h3 id="join-数组join方法"><a href="#join-数组join方法" class="header-anchor">#</a> Join(数组join方法)</h3> <h4 id="用法-76"><a href="#用法-76" class="header-anchor">#</a> 用法</h4> <p><code>Join</code>是用来实现数组<code>join</code>方法的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'a-p-p-l-e'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Join<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-75"><a href="#实现方式-75" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Join<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
    <span class="token operator">?</span> Rest<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token number">0</span>
      <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token string">''</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>First<span class="token operator">&amp;</span>string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> Join<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token string">''</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>First<span class="token operator">&amp;</span>string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">R</span>
</code></pre></div><h3 id="lastindexof-数组lastindexof方法"><a href="#lastindexof-数组lastindexof方法" class="header-anchor">#</a> LastIndexOf(数组lastIndexOf方法)</h3> <h4 id="用法-77"><a href="#用法-77" class="header-anchor">#</a> 用法</h4> <p><code>LastIndexOf</code>是用来实现数组<code>lastIndexOf</code>方法的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：3</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> LastIndexOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-76"><a href="#实现方式-76" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Pop<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">]</span> <span class="token operator">?</span> Rest <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">LastIndexOf<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">U</span><span class="token punctuation">,</span>
  Index <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> Pop<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">,</span> <span class="token keyword">infer</span> Last<span class="token punctuation">]</span>
    <span class="token operator">?</span> Last <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span>
      <span class="token operator">?</span> Index<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> LastIndexOf<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> Pop<span class="token operator">&lt;</span>Index<span class="token operator">&gt;&gt;</span>
    <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div><h3 id="unique-数组去重"><a href="#unique-数组去重" class="header-anchor">#</a> Unique(数组去重)</h3> <h4 id="用法-78"><a href="#用法-78" class="header-anchor">#</a> 用法</h4> <p><code>Unique</code>是用来实现数组去重的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[1, 2, 3]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Unique<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-77"><a href="#实现方式-77" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Unique<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
    <span class="token operator">?</span> First <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">R</span></span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span>
      <span class="token operator">?</span> Unique<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> Unique<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> First<span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">R</span>
</code></pre></div><h3 id="maptypes-类型转换"><a href="#maptypes-类型转换" class="header-anchor">#</a> MapTypes(类型转换)</h3> <h4 id="用法-79"><a href="#用法-79" class="header-anchor">#</a> 用法</h4> <p><code>MapTypes</code>是用来根据指定类型进行替换的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：{ type: number; age: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> MapTypes<span class="token operator">&lt;</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>mapTo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-78"><a href="#实现方式-78" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">GetMapType<span class="token operator">&lt;</span>
  <span class="token constant">T</span><span class="token punctuation">,</span> 
  <span class="token constant">R</span><span class="token punctuation">,</span>
  Type <span class="token operator">=</span> <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> mapTo<span class="token operator">:</span> <span class="token keyword">infer</span> To <span class="token punctuation">}</span> <span class="token operator">?</span> To <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span>Type<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> Type
<span class="token keyword">type</span> <span class="token class-name">MapTypes<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> GetMapType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：在以上的实现中，最核心的代码是获取<code>Type</code>类型。</p> <ul><li><code>R extends { mapFrom: T, mapTo: infer To }</code>：这段代码表示，<code>R</code>是不是右边的子类型，我们以以上案例来说明：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 当P = 'type'时，</span>
<span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>mapTo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> mapTo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> mapTo<span class="token operator">:</span> <span class="token keyword">infer</span> To <span class="token punctuation">}</span>
<span class="token operator">=&gt;</span> <span class="token function-variable function">To</span> <span class="token operator">=</span> <span class="token builtin">number</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>

<span class="token comment">// 当P = 'age'时</span>
<span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>mapTo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> mapTo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> mapFrom<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> mapTo<span class="token operator">:</span> <span class="token keyword">infer</span> To <span class="token punctuation">}</span>
<span class="token operator">=&gt;</span> <span class="token builtin">never</span>
<span class="token operator">=&gt;</span> GetMapType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token builtin">number</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span> 
</code></pre></div><h2 id="困难"><a href="#困难" class="header-anchor">#</a> 困难</h2> <h3 id="currying-柯里化"><a href="#currying-柯里化" class="header-anchor">#</a> Currying(柯里化)</h3> <p>在<code>JavaScript</code>中<code>Currying</code>是用来实现函数柯里化的，其用法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
<span class="token keyword">const</span> three <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> curriedAdd <span class="token operator">=</span> <span class="token function">Currying</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span>
<span class="token keyword">const</span> five <span class="token operator">=</span> <span class="token function">curriedAdd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="用法-80"><a href="#用法-80" class="header-anchor">#</a> 用法</h4> <p><code>Currying</code>是用来实现<code>JavaScript</code>中的柯里化的，其用法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> func <span class="token operator">=</span> <span class="token function">Currying</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token comment">// (a: string) =&gt; (a: number) =&gt; (a: boolean) =&gt; true</span>
type funcType <span class="token operator">=</span> <span class="token keyword">typeof</span> func
</code></pre></div><h4 id="实现方式-79"><a href="#实现方式-79" class="header-anchor">#</a> 实现方式</h4> <div class="language-js extra-class"><pre class="language-js"><code>type Curry<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
  <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">R</span>
    <span class="token operator">:</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer First<span class="token punctuation">,</span> <span class="token operator">...</span>infer Rest<span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span> First</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Rest<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">0</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> Curry<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token constant">R</span>
declare <span class="token keyword">function</span> Currying<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>fn<span class="token operator">:</span> <span class="token constant">F</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer <span class="token constant">P</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer <span class="token constant">R</span> <span class="token operator">?</span> Curry<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> never
</code></pre></div><h3 id="uniontointersection-元组取交集"><a href="#uniontointersection-元组取交集" class="header-anchor">#</a> UnionToIntersection(元组取交集)</h3> <p>在实现<code>UnionToIntersection</code>之前，我们先来回顾一下<code>TS</code>中<code>&amp;</code>符号的作用：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：never</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&amp;</span> <span class="token string">'foo'</span> <span class="token operator">&amp;</span> <span class="token boolean">true</span>
<span class="token comment">// 结果：{ a: number; b: number; c: boolean; }</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span> c<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token comment">// 结果：(a: boolean | number) =&gt; string</span>
<span class="token keyword">type</span> <span class="token class-name">result3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
</code></pre></div><p>案例解析：</p> <ul><li>案例一：因为<code>1</code>、<code>foo</code>以及<code>true</code>，没有交集部分，所以这里结果为<code>never</code>。</li> <li>案例二：对于<code>a</code>和<code>c</code>属性而言，它们只存在于自身类型，所以交集部分是自身；对于<code>b</code>属性而言，它在两个类型中都存在，且其属性的类型存在交集部分，既：<code>number</code>。</li> <li>案例三：对于函数的交叉类型，我们从函数参数、函数返回值这两个部分来说明。对于函数参数而言，取其联合类型；对于函数返回值而言，取其交叉类型。</li></ul> <p>从以上几个案例中可以看出，<code>TS</code>中的<code>&amp;</code>符号是取交集的意思，也叫<strong>交叉类型</strong>。</p> <h4 id="用法-81"><a href="#用法-81" class="header-anchor">#</a> 用法</h4> <p><code>UnionToIntersection</code>所做的事情和<code>&amp;</code>符号是一样的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：never</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token string">'foo'</span> <span class="token operator">|</span> <span class="token boolean">true</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：{ a: number; b: number; c: boolean; }</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span> c<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：(a: boolean | number) =&gt; string</span>
<span class="token keyword">type</span> <span class="token class-name">result3</span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-80"><a href="#实现方式-80" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">UnionToIntersection<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token punctuation">(</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> 
    <span class="token operator">?</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> 
    <span class="token operator">:</span> <span class="token builtin">never</span>
  <span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">V</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> 
    <span class="token operator">?</span> <span class="token constant">V</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>U extends any ? X : Y</code>： 这里把<code>U</code>类型处理成<code>(x: U) =&gt; any</code>的函数类型。</li> <li><code>T extends (x: infer V) =&gt; any ? V : never</code>：这里的<code>T</code>就是上一步的函数类型，如果<code>extends</code>成立，则返回<code>V</code>，此时的<code>V</code>必然满足<code>U &amp; V</code>。</li></ul> <h3 id="requiredkeys-所有必填字段"><a href="#requiredkeys-所有必填字段" class="header-anchor">#</a> RequiredKeys(所有必填字段)</h3> <h4 id="用法-82"><a href="#用法-82" class="header-anchor">#</a> 用法</h4> <p><code>RequiredKeys</code>是用来返回一个类型中所有必填字段，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  sex<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：'name' | 'age'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> RequiredKeys<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-81"><a href="#实现方式-81" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">RequiredKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">P</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：</p> <ul><li><code>T extends Record&lt;P,T[P]&gt;</code>：<code>Record</code>之前已经实现过，这里不在赘述，理解这段代码，可以参考如下案例：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一步 P = 'name'</span>
<span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token string">'name'</span>
<span class="token comment">// 第二步 p = 'age'</span>
<span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token string">'age'</span>
<span class="token comment">// 第三步 p = 'sex'</span>
<span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> sex<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token builtin">never</span>
<span class="token comment">// 第四步 p = 'address'</span>
<span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token builtin">never</span>
</code></pre></div><p>在经过以上四个步骤后，得到的新类型为：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token string">'age'</span><span class="token punctuation">;</span>
  sex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
  address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>T[keyof T]</code>：<code>keyof T</code>得到所有的属性，然后根据属性取其类型。</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// keyof T的结果</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P</span></span> <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'sex'</span> <span class="token operator">|</span> <span class="token string">'address'</span>

<span class="token comment">// T[P]的结果，类型为never自动过滤</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token builtin">never</span> <span class="token operator">|</span> <span class="token builtin">never</span> <span class="token operator">=&gt;</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span>
</code></pre></div><h3 id="getrequired-必填字段组成的类型"><a href="#getrequired-必填字段组成的类型" class="header-anchor">#</a> GetRequired(必填字段组成的类型)</h3> <h4 id="用法-83"><a href="#用法-83" class="header-anchor">#</a> 用法</h4> <p><code>GetRequired</code>是用来取一个类型中那些由必填字段组成的一个新类型的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  sex<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ age: number; sex: undefined; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> GetRequired<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-82"><a href="#实现方式-82" class="header-anchor">#</a> 实现方式</h4> <p>在<code>RequiredKeys</code>的基础上，能够很容易的实现<code>GetRequired</code>。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">GetRequired<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> RequiredKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="optionalkeys-所有可选字段"><a href="#optionalkeys-所有可选字段" class="header-anchor">#</a> OptionalKeys(所有可选字段)</h3> <p><code>OptionalKeys</code>和<code>RequiredKeys</code>所做的事情相反，其获取的是所有可选字段。</p> <h4 id="用法-84"><a href="#用法-84" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  sex<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：'sex' | 'address'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> OptionalKeys<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-83"><a href="#实现方式-83" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">OptionalKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">P</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span>
</code></pre></div><p>代码详解：从上面代码中可以看出，它和<code>RequiredKeys</code>实现思路是一样的，区别只是在<code>extends</code>关键词后面的处理不同。</p> <h3 id="getoptional-可选字段组成的类型"><a href="#getoptional-可选字段组成的类型" class="header-anchor">#</a> GetOptional(可选字段组成的类型)</h3> <h4 id="用法-85"><a href="#用法-85" class="header-anchor">#</a> 用法</h4> <p>在实现了<code>OptionalKeys</code>后，我们来实现其对应的<code>GetOptional</code>，其对应方法使用方式如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  sex<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  address<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：{ sex?: undefined; address?: string; }</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> GetOptional<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-84"><a href="#实现方式-84" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">GetOptional<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> OptionalKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="capitalizewords-所有单词首字母大写"><a href="#capitalizewords-所有单词首字母大写" class="header-anchor">#</a> CapitalizeWords(所有单词首字母大写)</h3> <h4 id="用法-86"><a href="#用法-86" class="header-anchor">#</a> 用法</h4> <p><code>CapitalizeWords</code>是用来把一个字符串中所有单词，变为大写字母的，其中这个字符串以固定的分隔符分割，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'Foobar'</span>
<span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> CapitalizeWords<span class="token operator">&lt;</span><span class="token string">'foobar'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：'Foo Bar.Hello,World'</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> CapitalizeWords<span class="token operator">&lt;</span><span class="token string">'foo bar.hello,world'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-85"><a href="#实现方式-85" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CapitalizeWords<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span>  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> split<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> right<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> split <span class="token keyword">extends</span> <span class="token string">' '</span> <span class="token operator">|</span> <span class="token string">'.'</span> <span class="token operator">|</span> <span class="token string">','</span>
         <span class="token operator">?</span> CapitalizeWords<span class="token operator">&lt;</span>Capitalize<span class="token operator">&lt;</span>right<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>split<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>
         <span class="token operator">:</span> CapitalizeWords<span class="token operator">&lt;</span>right<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>split<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> Capitalize<span class="token operator">&lt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">S</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>
</code></pre></div><p>代码详解：在以上实现方法中，我们借用辅助字符串来实现，以第二个例子为例，详细解析分析如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一次迭代</span>
<span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">''</span> left <span class="token operator">=</span> <span class="token string">'f'</span> split <span class="token operator">=</span> <span class="token string">'o'</span> right <span class="token operator">=</span> <span class="token string">'oo bar.hello,world'</span>
split不满足条件，递归调用

<span class="token comment">// 第二次迭代</span>
<span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'fo'</span> left <span class="token operator">=</span> <span class="token string">'o'</span> split <span class="token operator">=</span> <span class="token string">' '</span> right <span class="token operator">=</span> <span class="token string">'bar.hello,world'</span>
split满足条件，递归调用

<span class="token comment">// 第三次迭代</span>
<span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'foo '</span> left <span class="token operator">=</span> <span class="token string">'b'</span> split <span class="token operator">=</span> <span class="token string">'a'</span> right <span class="token operator">=</span> <span class="token string">'r.hello,world'</span>
split不满足条件，递归调用

<span class="token operator">...</span> 省略

<span class="token comment">// 最后一次迭代</span>
<span class="token constant">R</span> <span class="token operator">=</span> <span class="token string">'foo Bar.Hello,Worl'</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'d'</span>
<span class="token constant">S</span>不满足条件

最后结果：<span class="token constant">R</span> <span class="token operator">+</span> <span class="token constant">S</span> <span class="token operator">=</span> Capitalize<span class="token operator">&lt;</span><span class="token string">'foo Bar.Hello,worl'</span> <span class="token operator">+</span> <span class="token string">'d'</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token string">'Foo Bar.hello,world'</span>
</code></pre></div><h3 id="camelcase-下划线字符串转小驼峰"><a href="#camelcase-下划线字符串转小驼峰" class="header-anchor">#</a> CamelCase(下划线字符串转小驼峰)</h3> <h4 id="用法-87"><a href="#用法-87" class="header-anchor">#</a> 用法</h4> <p>与<strong>中级</strong>章节实现不同，此章节中<code>CamelCase</code>是用来将下划线字符串转小驼峰的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'fooBarHelloWorld'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> CamelCase<span class="token operator">&lt;</span><span class="token string">'foo_bar_hello_world'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-86"><a href="#实现方式-86" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CamelCase<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> char<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> right<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Lowercase<span class="token operator">&lt;</span>left<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uppercase<span class="token operator">&lt;</span>char<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CamelCase<span class="token operator">&lt;</span>right<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> Lowercase<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="parseprintformat-获取字符串格式化参数"><a href="#parseprintformat-获取字符串格式化参数" class="header-anchor">#</a> ParsePrintFormat(获取字符串格式化参数)</h3> <h4 id="用法-88"><a href="#用法-88" class="header-anchor">#</a> 用法</h4> <p><code>ParsePrintFormat</code>是用来获取字符串格式化参数的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 参数映射表</span>
<span class="token keyword">type</span> <span class="token class-name">ControlMap</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'c'</span><span class="token operator">:</span> <span class="token string">'char'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'s'</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'d'</span><span class="token operator">:</span> <span class="token string">'dec'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'o'</span><span class="token operator">:</span> <span class="token string">'oct'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'h'</span><span class="token operator">:</span> <span class="token string">'hex'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'f'</span><span class="token operator">:</span> <span class="token string">'float'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'p'</span><span class="token operator">:</span> <span class="token string">'pointer'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：['string', 'dec']</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> ParsePrintFormat<span class="token operator">&lt;</span><span class="token string">'Hello %s: score is %d'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-87"><a href="#实现方式-87" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ControlMap</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'c'</span><span class="token operator">:</span> <span class="token string">'char'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'s'</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'d'</span><span class="token operator">:</span> <span class="token string">'dec'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'o'</span><span class="token operator">:</span> <span class="token string">'oct'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'h'</span><span class="token operator">:</span> <span class="token string">'hex'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'f'</span><span class="token operator">:</span> <span class="token string">'float'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'p'</span><span class="token operator">:</span> <span class="token string">'pointer'</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ParsePrintFormat<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Char<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> Char <span class="token keyword">extends</span> <span class="token keyword">keyof</span> ControlMap
      <span class="token operator">?</span> ParsePrintFormat<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> ControlMap<span class="token punctuation">[</span>Char<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> ParsePrintFormat<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">R</span>
</code></pre></div><p>代码详解：在以上实现方法中，借用了辅助数组的思想，拿上面案例来说，具体迭代分析如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一次迭代</span>
<span class="token constant">S</span>满足条件 <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">S1</span> <span class="token operator">=</span> <span class="token string">'Hello '</span> Char <span class="token operator">=</span> <span class="token string">'s'</span> <span class="token constant">S2</span> <span class="token operator">=</span> <span class="token string">': score is %d'</span>

<span class="token comment">// 第二次迭代</span>
<span class="token constant">S</span>满足条件 <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'string'</span><span class="token punctuation">]</span>  <span class="token constant">S1</span> <span class="token operator">=</span> <span class="token string">': score is '</span> Char <span class="token operator">=</span> <span class="token string">'d'</span> <span class="token constant">S2</span> <span class="token operator">=</span> <span class="token string">''</span>

<span class="token comment">// 最后一次迭代</span>
<span class="token constant">S</span>不满足条件 <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token string">'dec'</span><span class="token punctuation">]</span>

<span class="token comment">// 结果</span>
result <span class="token operator">=</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token string">'dec'</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="isany和notany"><a href="#isany和notany" class="header-anchor">#</a> IsAny和NotAny</h3> <h4 id="用法-89"><a href="#用法-89" class="header-anchor">#</a> 用法</h4> <p><code>IsAny</code>是用来判断一个类型是否为<code>any</code>的，<code>NotAny</code>和它做的事情相反。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span>     <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name">t3</span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>       <span class="token comment">// true</span>

<span class="token keyword">type</span> <span class="token class-name">t4</span> <span class="token operator">=</span> NotAny<span class="token operator">&lt;</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name">t5</span> <span class="token operator">=</span> NotAny<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span>     <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name">t6</span> <span class="token operator">=</span> NotAny<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>       <span class="token comment">// false</span>
</code></pre></div><h4 id="实现方式-88"><a href="#实现方式-88" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token keyword">type</span> <span class="token class-name">NotAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token keyword">extends</span> <span class="token class-name">IsAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre></div><p>代码详解：<code>1 &amp; T</code>的结果只能是：<code>1</code>、<code>never</code>或者<code>any</code>。当使用<code>0 extends</code>这三个结果的时候，只有<code>any</code>判断为真。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：false</span>
<span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">extends</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token comment">// 结果：false</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token comment">// 结果：true</span>
<span class="token keyword">type</span> <span class="token class-name">t3</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="get-字符串路径取值"><a href="#get-字符串路径取值" class="header-anchor">#</a> Get(字符串路径取值)</h3> <h4 id="用法-90"><a href="#用法-90" class="header-anchor">#</a> 用法</h4> <p><code>Get</code>是用来进行字符串路径取值的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Data</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token punctuation">{</span>
    bar<span class="token operator">:</span> <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">'foobar'</span><span class="token punctuation">,</span>
      count<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    include<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  hello<span class="token operator">:</span> <span class="token string">'world'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：world</span>
<span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> Get<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果：foobar</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> Get<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> <span class="token string">'foo.bar.value'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果： never</span>
<span class="token keyword">type</span> <span class="token class-name">t3</span> <span class="token operator">=</span> Get<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> <span class="token string">'no.exits'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-89"><a href="#实现方式-89" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Get<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token constant">S1</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
      <span class="token operator">?</span> Get<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">S1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">S2</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>
    <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
      <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>代码详解：对于<code>Get</code>的实现，主要分为两部分：含有<code>.</code>符号的字符串和不含<code>.</code>符号的字符串。</p> <ul><li>不含有<code>.</code>符号的字符串：对于这种情况，我们只需要判断它是否为<code>T</code>类型中的某个<code>key</code>，如果是则直接取值；如果不是，则返回<code>never</code>。</li> <li>含有<code>.</code>符号的字符串：对于这种情况，我们先判断<code>.</code>符号左侧部分是否满足为<code>T</code>类型的某个<code>key</code>，如果满足则递归调用<code>Get</code>；如果不满足，则直接返回<code>never</code>。</li></ul> <h3 id="stringtonumber-字符串数字转数字"><a href="#stringtonumber-字符串数字转数字" class="header-anchor">#</a> StringToNumber(字符串数字转数字)</h3> <h4 id="用法-91"><a href="#用法-91" class="header-anchor">#</a> 用法</h4> <p><code>StringToNumber</code>是用来将字符串形式的数字转换成真正数字类型数字的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：123</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StringToNumber<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-90"><a href="#实现方式-90" class="header-anchor">#</a> 实现方式</h4> <p>在<code>JavaScript</code>中，我们可以很方便的调用<code>Number()</code>方法或者<code>parseInt()</code>方法来将字符串类型的数字，转换成数字类型的数字。但在<code>TS</code>中，并没有这样的方法，需要我们来手动实现。</p> <p><code>StringToNumber</code>的实现并不容易理解，我们需要将其进行拆分，一步步来完善，其实现思路如下：</p> <ul><li>第一步：可以很容易获取字符串<code>'123'</code>中每一位字符，我们将其存储在辅助数组<code>T</code>中，如下：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">StringToNumber<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> StringToNumber<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">S1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">T</span>

<span class="token comment">// 结果：['1', '2', '3']</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StringToNumber<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li>第二步：我们需要将单个字符串类型的数字，转换成真正数字类型的数字，可以借助中间数组来帮忙，例如：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token string">'1'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token number">1</span>
<span class="token string">'2'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token number">2</span>
<span class="token string">'3'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">...</span>
<span class="token string">'9'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token number">9</span>
</code></pre></div><p>根据以上规律，我们封装一个<code>MakeArray</code>方法，它的实现代码如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MakeArray<span class="token operator">&lt;</span><span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> MakeArray<span class="token operator">&lt;</span><span class="token constant">N</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> MakeArray<span class="token operator">&lt;</span><span class="token string">'1'</span><span class="token operator">&gt;</span> <span class="token comment">// [0]</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> MakeArray<span class="token operator">&lt;</span><span class="token string">'2'</span><span class="token operator">&gt;</span> <span class="token comment">// [0, 0]</span>
<span class="token keyword">type</span> <span class="token class-name">t3</span> <span class="token operator">=</span> MakeArray<span class="token operator">&lt;</span><span class="token string">'3'</span><span class="token operator">&gt;</span> <span class="token comment">// [0, 0, 0]</span>
</code></pre></div><ul><li>第三步：现在有了百位，十位和个位的数字，我们应该运用算术把它们按照一定的规律累加起来，如下：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment">// 第一次迭代</span>
target <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token comment">// 第二次迭代</span>
target <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">12</span>
<span class="token comment">// 第三次迭代</span>
target <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">123</span>
<span class="token comment">// 迭代规律</span>
target <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> target <span class="token operator">+</span> <span class="token constant">N</span>
</code></pre></div><p>根据以上思路，我们还需要一个乘十的工具函数，对应到实际需求，就是需要把一个数组<code>copy</code>十次，因此我们封装一个<code>Multiply10</code>工具，其实现代码如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Multiply10<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Multiply10<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</span>
</code></pre></div><ul><li>第四步：根据前几步的分析，把所有东西串联起来，<code>StringToNumber</code>完整实现代码如下：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Digital</span> <span class="token operator">=</span> <span class="token string">'0'</span><span class="token operator">|</span><span class="token string">'1'</span><span class="token operator">|</span><span class="token string">'2'</span><span class="token operator">|</span><span class="token string">'3'</span><span class="token operator">|</span><span class="token string">'4'</span><span class="token operator">|</span><span class="token string">'5'</span><span class="token operator">|</span><span class="token string">'6'</span><span class="token operator">|</span><span class="token string">'7'</span><span class="token operator">|</span><span class="token string">'8'</span><span class="token operator">|</span><span class="token string">'9'</span>
<span class="token keyword">type</span> <span class="token class-name">Multiply10<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">MakeArray<span class="token operator">&lt;</span><span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> MakeArray<span class="token operator">&lt;</span><span class="token constant">N</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name">StringToNumber<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token constant">S1</span> <span class="token keyword">extends</span> <span class="token class-name">Digital</span>
      <span class="token operator">?</span> StringToNumber<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Multiply10<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span>MakeArray<span class="token operator">&lt;</span><span class="token constant">S1</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>
    <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>第五步：为了更好的理解递归的过程，我们拆解成如下步骤来说明：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StringToNumber<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token operator">&gt;</span>

<span class="token comment">// 第一次递归，S满足${infer S1}${infer S2}， S1满足Digital</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'123'</span> <span class="token constant">S1</span> <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token constant">S2</span> <span class="token operator">=</span> <span class="token string">'23'</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">// 第二次递归，S满足${infer S1}${infer S2}， S1满足Digital</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'23'</span>  <span class="token constant">S1</span> <span class="token operator">=</span> <span class="token string">'2'</span> <span class="token constant">S2</span> <span class="token operator">=</span> <span class="token string">'3'</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token number">.0</span><span class="token punctuation">]</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment">// 第三次递归，S满足${infer S1}${infer S2}， S1满足Digital</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'3'</span>  <span class="token constant">S1</span> <span class="token operator">=</span> <span class="token string">'3'</span> <span class="token constant">S2</span> <span class="token operator">=</span> <span class="token string">''</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token number">.0</span><span class="token punctuation">]</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">120</span>

<span class="token comment">// 第四次递归，S不满足${infer S1}${infer S2} T['length']取值</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">''</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token number">.0</span><span class="token punctuation">]</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">123</span>

<span class="token comment">// 结果：</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> StringToNumber<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token operator">&gt;</span> <span class="token comment">// 123</span>
</code></pre></div><h3 id="filterout-数组元素过滤"><a href="#filterout-数组元素过滤" class="header-anchor">#</a> FilterOut(数组元素过滤)</h3> <h4 id="用法-92"><a href="#用法-92" class="header-anchor">#</a> 用法</h4> <p><code>FilterOut</code>是用来从数组中移除指定元素的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[2]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> FilterOut<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'a'</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-91"><a href="#实现方式-91" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">FilterOut<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">F</span><span class="token punctuation">,</span>
  <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> args<span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">R</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token constant">F</span><span class="token punctuation">]</span>
        <span class="token operator">?</span> FilterOut<span class="token operator">&lt;</span>args<span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
        <span class="token operator">:</span> FilterOut<span class="token operator">&lt;</span>args<span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token constant">K</span>
</code></pre></div><p>代码详解：</p> <ul><li>第一步：我们借用赋值函数来存放最后的结果。</li> <li>第二步：迭代数组<code>T</code>，拿每一个元素去和指定的<code>F</code>进行判断，如果<code>R</code>是<code>F</code>的子类型，则不添加此元素到结果数组中，反之添加。</li> <li>第三步：当迭代完毕时，直接返回结果数组<code>K</code>。</li></ul> <h3 id="tupletoenum-元组转枚举"><a href="#tupletoenum-元组转枚举" class="header-anchor">#</a> TupleToEnum(元组转枚举)</h3> <h4 id="用法-93"><a href="#用法-93" class="header-anchor">#</a> 用法</h4> <p><code>TupleToEnum</code>是用来将元组转换为枚举的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> OperatingSystem <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'macOs'</span><span class="token punctuation">,</span> <span class="token string">'Windows'</span><span class="token punctuation">,</span> <span class="token string">'Linux'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
<span class="token keyword">type</span> <span class="token class-name">Expected1</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> MacOs<span class="token operator">:</span> <span class="token string">'macOs'</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> Windows<span class="token operator">:</span> <span class="token string">'Windows'</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> Linux<span class="token operator">:</span> <span class="token string">'Linux'</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Expected2</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> MacOs<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> Windows<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> Linux<span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：Expected1</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> TupleToEnum<span class="token operator">&lt;</span><span class="token keyword">typeof</span> OperatingSystem<span class="token operator">&gt;</span>
<span class="token comment">// 结果：Expected2</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> TupleToEnum<span class="token operator">&lt;</span><span class="token keyword">typeof</span> OperatingSystem<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-92"><a href="#实现方式-92" class="header-anchor">#</a> 实现方式</h4> <p>在实现<code>TupleToEnum</code>之前，我们先来实现<code>TupleKeys</code>，它是用来获取所有元组索引组合成的联合类型的。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">TupleKeys<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">readonly</span></span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> args<span class="token punctuation">]</span>
      <span class="token operator">?</span> TupleKeys<span class="token operator">&lt;</span>args<span class="token operator">&gt;</span> <span class="token operator">|</span> args<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token comment">// 结果：0 | 1 | 2</span>
<span class="token keyword">type</span> <span class="token class-name">keys</span> <span class="token operator">=</span> TupleKeys<span class="token operator">&lt;</span><span class="token keyword">typeof</span> OperatingSystem<span class="token operator">&gt;</span>
</code></pre></div><p>在有了以上<code>keys</code>后，就能很容易实现<code>TupleToEnum</code>了，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">TupleToEnum<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> TupleKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token keyword">as</span> Capitalize<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="format-字符串格式化函数类型"><a href="#format-字符串格式化函数类型" class="header-anchor">#</a> Format(字符串格式化函数类型)</h3> <p><code>%s</code>表示格式化为<code>(x: string) =&gt; any</code>形式，<code>%d</code>表示格式化为<code>(x: number) =&gt; any</code>形式。</p> <h4 id="用法-94"><a href="#用法-94" class="header-anchor">#</a> 用法</h4> <p><code>Format</code>是将字符串格式化为指定函数类型的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果1：(x: string) =&gt; string</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> Format<span class="token operator">&lt;</span><span class="token string">'a%sbc'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果2：(x: number) =&gt; string</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> Format<span class="token operator">&lt;</span><span class="token string">'a%dbc'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果3：(x: number) =&gt; (x: string) =&gt; string&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">result3</span> <span class="token operator">=</span> Format<span class="token operator">&lt;</span><span class="token string">'a%dbc%s'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-93"><a href="#实现方式-93" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">FormatMaps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'s'</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token string-property property">'d'</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Format<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">P</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> FormatMaps
        <span class="token operator">?</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> FormatMaps<span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Format<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;</span>
        <span class="token operator">:</span> <span class="token builtin">string</span>
      <span class="token operator">:</span> <span class="token builtin">string</span>
</code></pre></div><h3 id="lengthofstring-字符串的长度-2"><a href="#lengthofstring-字符串的长度-2" class="header-anchor">#</a> LengthOfString(字符串的长度)</h3> <p>我们之前在<strong>中级</strong>大章节中已经实现过<code>LengthOfString</code>，但它面临的问题是，如果字符有上百个，由于<code>TS</code>对于递归的次数存在限制，会提示嵌套过深。</p> <h4 id="用法-95"><a href="#用法-95" class="header-anchor">#</a> 用法</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：91</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> LengthOfString<span class="token operator">&lt;</span><span class="token string">'1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-94"><a href="#实现方式-94" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">LengthOfString<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S3</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S4</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S5</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S6</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S7</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S8</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S9</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> LengthOfString<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
          <span class="token operator">?</span> LengthOfString<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">S1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
          <span class="token operator">:</span> <span class="token constant">R</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
</code></pre></div><p>代码解析：这里我们巧妙的使用占位的思想，<code>S extends ${infer S1}${infer S2}${infer S3}</code>，如果<code>S</code>满足这个占位形式，则表示<code>S</code>的长度至少为<code>2</code>，带入到上面的例子，解析步骤如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 第一次递归</span>
<span class="token constant">S</span>满足至少<span class="token number">10</span>个字符的长度，<span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token comment">// 第二弟递归</span>
<span class="token constant">S</span>满足至少<span class="token number">10</span>个字符的长度，<span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token comment">// 省略</span>
<span class="token comment">// 最后一次递归</span>
<span class="token constant">S</span> <span class="token operator">=</span> <span class="token string">'1'</span>不满足至少<span class="token number">10</span>个字符的长度，<span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token comment">// 最后结果</span>
<span class="token constant">R</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">91</span>
</code></pre></div><h3 id="uniontotuple-联合类型转元组"><a href="#uniontotuple-联合类型转元组" class="header-anchor">#</a> UnionToTuple(联合类型转元组)</h3> <h4 id="用法-96"><a href="#用法-96" class="header-anchor">#</a> 用法</h4> <p><code>UnionToTuple</code>是用来将联合类型转成元组的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果1：['a', 'b']</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> UnionToTuple<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果2：['a', 'b']</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> UnionToTuple<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果3：['a', 'b']</span>
<span class="token keyword">type</span> <span class="token class-name">result3</span> <span class="token operator">=</span> UnionToTuple<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token builtin">never</span><span class="token operator">&gt;</span>

</code></pre></div><h4 id="实现方式-95"><a href="#实现方式-95" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">UnionToIntersection<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> 
  <span class="token operator">?</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> 
  <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> 
  <span class="token operator">?</span> <span class="token constant">R</span>
  <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">LastUnion<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span>
    <span class="token operator">?</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
  <span class="token operator">?</span> <span class="token constant">R</span>
  <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">UnionToTuple<span class="token operator">&lt;</span>
  <span class="token constant">T</span><span class="token punctuation">,</span>
  Last <span class="token operator">=</span> LastUnion<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">never</span><span class="token punctuation">]</span>
  <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>UnionToTuple<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Last<span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span> Last<span class="token punctuation">]</span> 
</code></pre></div><p>代码详解：</p> <ul><li><code>UnionToIntersection</code>: 联合类型取交集，在之前已经实现过，这里不再赘述。主要理解以下案例：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">f1</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
<span class="token keyword">type</span> <span class="token class-name">f2</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>

<span class="token comment">// 函数重载结果</span>
<span class="token comment">// function (x: 1): 0;</span>
<span class="token comment">// function (x: 2): 0;</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span>f1 <span class="token operator">|</span> f2<span class="token operator">&gt;</span>

</code></pre></div><p>对于函数参数的交集而言，不是简单的把参数取交集，而是&quot;联合&quot;起来，也就是构造一个新的函数类型，即：<strong>函数重载</strong></p> <ul><li><code>LastUnion</code>: 取联合类型最后的一个元素，如果一个函数存在重载的情况，<code>TS</code>会取最后一个函数签名，例如：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">f1</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>
<span class="token keyword">type</span> <span class="token class-name">f2</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span>

<span class="token comment">// 结果1：2</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> f1 <span class="token operator">&amp;</span> f2 <span class="token keyword">extends</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token comment">// 结果2：1</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> f2 <span class="token operator">&amp;</span> f1 <span class="token keyword">extends</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><h3 id="join-字符串拼接"><a href="#join-字符串拼接" class="header-anchor">#</a> Join(字符串拼接)</h3> <h4 id="用法-97"><a href="#用法-97" class="header-anchor">#</a> 用法</h4> <p><code>Join</code>是用来实现拼接字符串的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果1： ''</span>
<span class="token keyword">const</span> Expected1 <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果2： 'a'</span>
<span class="token keyword">const</span> Expected2 <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果3： 'abc'</span>
<span class="token keyword">const</span> Expected3 <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果4： 'a-b-c'</span>
<span class="token keyword">const</span> Expected4 <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="实现方式-96"><a href="#实现方式-96" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Tail<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span> <span class="token operator">?</span> Rest <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">StringJoin<span class="token operator">&lt;</span>
  <span class="token constant">D</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token string">''</span>
    <span class="token operator">:</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> Only<span class="token punctuation">]</span>
      <span class="token operator">?</span> Only
      <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">P</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">D</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>StringJoin<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> Tail<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">join</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">D</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>delimiter<span class="token operator">:</span> <span class="token constant">D</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">...</span>parts<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> StringJoin<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">P</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="deeppick-深层次pick"><a href="#deeppick-深层次pick" class="header-anchor">#</a> DeepPick(深层次Pick)</h3> <h4 id="用法-98"><a href="#用法-98" class="header-anchor">#</a> 用法</h4> <p><code>DeepPick</code>是用来深层次获取属性值的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Obj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  c<span class="token operator">:</span>  <span class="token builtin">boolean</span><span class="token punctuation">,</span>
  obj<span class="token operator">:</span> <span class="token punctuation">{</span>
    d<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    e<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    f<span class="token operator">:</span>  <span class="token builtin">boolean</span><span class="token punctuation">,</span>
    obj2<span class="token operator">:</span> <span class="token punctuation">{</span>
      g<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
      h<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
      i<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果1：Obj</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> DeepPick<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">''</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果2：{ a: number; }</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> DeepPick<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果3：{ a: number; } &amp; { obj: { d: number; } }</span>
<span class="token keyword">type</span> <span class="token class-name">result3</span> <span class="token operator">=</span> DeepPick<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'obj.d'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-97"><a href="#实现方式-97" class="header-anchor">#</a> 实现方式</h4> <p>在之前，我们实现过根据属性路径取值<code>Get</code>，根据其思路我们很容易实现<code>DeepPick</code>，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">UnionToIntersection<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token punctuation">(</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> 
    <span class="token operator">?</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> 
    <span class="token operator">:</span> <span class="token builtin">never</span>
  <span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">V</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> 
    <span class="token operator">?</span> <span class="token constant">V</span>
    <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">GetType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token constant">S1</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
      <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token constant">S1</span><span class="token punctuation">]</span><span class="token operator">:</span> GetType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">S1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">S2</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>
    <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
      <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token constant">S</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
      <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">DeepPick<span class="token operator">&lt;</span>
  <span class="token constant">T</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">infer</span></span> keys <span class="token operator">?</span> GetType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> keys<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token operator">&gt;</span>
</code></pre></div><h3 id="camelize-对象属性键转小驼峰"><a href="#camelize-对象属性键转小驼峰" class="header-anchor">#</a> Camelize(对象属性键转小驼峰)</h3> <h4 id="用法-99"><a href="#用法-99" class="header-anchor">#</a> 用法</h4> <p><code>Camelize</code>是用来将对象中的<code>key</code>全部转换为小驼峰的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  some_PROP<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  prop<span class="token operator">:</span> <span class="token punctuation">{</span>
    another_prop<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  array<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> snake_case<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Expected</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  someProp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  prop<span class="token operator">:</span> <span class="token punctuation">{</span> 
    anotherProp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  array<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> snakeCase<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结果：Expected</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Camelize<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-98"><a href="#实现方式-98" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">CamelCase<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Lowercase<span class="token operator">&lt;</span><span class="token constant">S1</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CamelCase<span class="token operator">&lt;</span>Capitalize<span class="token operator">&lt;</span>Lowercase<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;&gt;&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">:</span> <span class="token constant">S</span>

<span class="token keyword">type</span> <span class="token class-name">Camelize<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> CamelCase<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> 
    <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span>Camelize<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span>
        <span class="token operator">?</span> Camelize<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
        <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码详解：<code>CamelCase</code>的实现可以分为两个部分，第一部分来自于处理属性<code>key</code>转小驼峰的情况，第二部分来自于嵌套对象的情况。</p> <ul><li>处理属性<code>key</code>：根据之前介绍过的<code>as</code>用法，我们可以在<code>in</code>迭代过程中使用<code>as</code>来进一步<strong>加工或者处理</strong>属性<code>key</code>，也就是<code>CamelCase</code>的部分。</li> <li>处理嵌套对象：对于<code>T[P]</code>而言，我们考虑嵌套对象为数组和普通对象的情况，首先判断是否为数组类型，如果是则迭代数组递归调用<code>Camelize</code>；如果是普通对象，则直接调用<code>Camelize</code>；如果都不是，则直接返回<code>T[P]</code>即可。</li></ul> <h3 id="dropstring-移除全部字符"><a href="#dropstring-移除全部字符" class="header-anchor">#</a> DropString(移除全部字符)</h3> <h4 id="用法-100"><a href="#用法-100" class="header-anchor">#</a> 用法</h4> <p><code>DropString</code>是用来移除全部字符的，用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：'ooar!'</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> DropString<span class="token operator">&lt;</span><span class="token string">'foobar!'</span><span class="token punctuation">,</span> <span class="token string">'fb'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-99"><a href="#实现方式-99" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">StrngToUnion<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token constant">S1</span> <span class="token operator">|</span> StrngToUnion<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">S</span>

<span class="token keyword">type</span> <span class="token class-name">DropString<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">U</span> <span class="token operator">=</span> StrngToUnion<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">?</span> <span class="token constant">S1</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span>
      <span class="token operator">?</span> DropString<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>DropString<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>代码详解：实现<code>DropString</code>的核心是将指定的字符串转换为联合类型，转换之后只需要迭代字符串，判断当前迭代的字符是不是在联合类型中，如果是则直接丢弃，不是则原样保留。</p> <h3 id="split-字符串split方法"><a href="#split-字符串split方法" class="header-anchor">#</a> Split(字符串Split方法)</h3> <h4 id="用法-101"><a href="#用法-101" class="header-anchor">#</a> 用法</h4> <p><code>Split</code>是用来实现字符串<code>split</code>方法的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 结果：[&quot;Hi!&quot;, &quot;How&quot;, &quot;are&quot;, &quot;you?&quot;]</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Split<span class="token operator">&lt;</span><span class="token string">'Hi! How are you?'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-100"><a href="#实现方式-100" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Split<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">SEP</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> _<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">SEP</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">S2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">?</span> Split<span class="token operator">&lt;</span><span class="token constant">S2</span><span class="token punctuation">,</span> <span class="token constant">SEP</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">S1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
        <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token string">''</span>
          <span class="token operator">?</span> <span class="token constant">SEP</span> <span class="token keyword">extends</span> <span class="token string">''</span>
            <span class="token operator">?</span> <span class="token constant">R</span>
            <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">]</span>
          <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="isrequredkeys-是否为必填key"><a href="#isrequredkeys-是否为必填key" class="header-anchor">#</a> IsRequredKeys(是否为必填key)</h3> <h4 id="用法-102"><a href="#用法-102" class="header-anchor">#</a> 用法</h4> <p><code>IsRequredKeys</code>是用来判断是否为必填<code>key</code>的，其用法如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Obj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  b<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// 结果1：true</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> IsRequredKeys<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果2：false</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> IsRequredKeys<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="实现方式-101"><a href="#实现方式-101" class="header-anchor">#</a> 实现方式</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsRequiredKey<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><p>根据<code>IsRequiredKey</code>的实现思路，我们可以很容易实现<code>IsOptionalKey</code>，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsOptionalKey<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>

<span class="token comment">// 结果1：false</span>
<span class="token keyword">type</span> <span class="token class-name">result1</span> <span class="token operator">=</span> IsOptionalKey<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span>
<span class="token comment">// 结果2：true</span>
<span class="token keyword">type</span> <span class="token class-name">result2</span> <span class="token operator">=</span> IsOptionalKey<span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="objectentries-对象的entries方法"><a href="#objectentries-对象的entries方法" class="header-anchor">#</a> ObjectEntries(对象的entries方法)</h3> <h4 id="用法-103"><a href="#用法-103" class="header-anchor">#</a> 用法</h4> <h4 id="实现方式-102"><a href="#实现方式-102" class="header-anchor">#</a> 实现方式</h4> <h3 id="ispalindrome-是否为回文"><a href="#ispalindrome-是否为回文" class="header-anchor">#</a> IsPalindrome(是否为回文)</h3> <h4 id="用法-104"><a href="#用法-104" class="header-anchor">#</a> 用法</h4> <h4 id="实现方式-103"><a href="#实现方式-103" class="header-anchor">#</a> 实现方式</h4> <h3 id="mutablekeys-所有可写键"><a href="#mutablekeys-所有可写键" class="header-anchor">#</a> MutableKeys(所有可写键)</h3> <h4 id="用法-105"><a href="#用法-105" class="header-anchor">#</a> 用法</h4> <h4 id="实现方式-104"><a href="#实现方式-104" class="header-anchor">#</a> 实现方式</h4> <h3 id="intersection-交集"><a href="#intersection-交集" class="header-anchor">#</a> Intersection(交集)</h3> <h4 id="用法-106"><a href="#用法-106" class="header-anchor">#</a> 用法</h4> <h4 id="实现方式-105"><a href="#实现方式-105" class="header-anchor">#</a> 实现方式</h4> <h3 id="binarytodecimal-二进制转十进制"><a href="#binarytodecimal-二进制转十进制" class="header-anchor">#</a> BinaryToDecimal(二进制转十进制)</h3> <h4 id="用法-107"><a href="#用法-107" class="header-anchor">#</a> 用法</h4> <h4 id="实现方式-106"><a href="#实现方式-106" class="header-anchor">#</a> 实现方式</h4> <h2 id="地狱"><a href="#地狱" class="header-anchor">#</a> 地狱</h2> <p>撰写中...</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">7/8/2023, 6:16:50 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.0b7fabf2.js" defer></script><script src="/blog/assets/js/7.43c511ce.js" defer></script><script src="/blog/assets/js/57.68af370b.js" defer></script>
  </body>
</html>
